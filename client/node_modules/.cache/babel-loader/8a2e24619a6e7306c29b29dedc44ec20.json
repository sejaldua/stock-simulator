{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _propsDefinitions = require('./propsDefinitions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // @TODO\n// hot keys: select option on Enter, remove on Backspcae, highlight etc\n// disable option\n\n\nvar DEFAULT_LIST_POSITION = 'bottom';\n\nvar ReactSelectMe = function (_PureComponent) {\n  _inherits(ReactSelectMe, _PureComponent);\n\n  function ReactSelectMe(props) {\n    _classCallCheck(this, ReactSelectMe);\n\n    var _this = _possibleConstructorReturn(this, (ReactSelectMe.__proto__ || Object.getPrototypeOf(ReactSelectMe)).call(this, props));\n\n    _this.closeGlobal = function (e) {\n      var _this$props = _this.props,\n          isOpened = _this$props.isOpened,\n          beforeClose = _this$props.beforeClose;\n      var opened = _this.state.opened; // @maslianok: when you decide to change this, please, keep in mind, that this case should work:\n      // Open A -> Open B -> A should be closed\n\n      if (_this.skipPropagation || !opened) {\n        _this.skipPropagation = undefined;\n        return;\n      }\n\n      if (!isOpened && beforeClose(e) !== false) {\n        _this.setState({\n          opened: false\n        }, _this.onClose);\n      }\n    };\n\n    _this.skipEventPropagation = function () {\n      _this.skipPropagation = true;\n    };\n\n    _this.validateDataStructure = function (data) {\n      var toImmutable = _this.props.toImmutable;\n      return typeof toImmutable === 'function' ? toImmutable(data) : data;\n    };\n\n    _this.patchSelectedOption = function (selectedOption, options) {\n      var _this$validateDataStr;\n\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          labelKey = _this$props2.labelKey,\n          forbidPhantomSelection = _this$props2.forbidPhantomSelection; // search for this option in the `options` array\n\n      var value = (typeof selectedOption === 'undefined' ? 'undefined' : _typeof(selectedOption)) === 'object' ? selectedOption[valueKey] : selectedOption;\n      var option = options.find(function (o) {\n        return _this.getProp(o, valueKey) === value;\n      });\n\n      if (option || forbidPhantomSelection) {\n        return option;\n      } // if not found - make a phantom selection\n\n\n      return (typeof selectedOption === 'undefined' ? 'undefined' : _typeof(selectedOption)) === 'object' ? selectedOption : _this.validateDataStructure((_this$validateDataStr = {}, _defineProperty(_this$validateDataStr, valueKey, selectedOption), _defineProperty(_this$validateDataStr, labelKey, selectedOption), _this$validateDataStr));\n    };\n\n    _this.setSearchValue = function (value) {\n      var onSearch = _this.props.onSearch;\n\n      _this.setState({\n        search: value\n      });\n\n      if (_this.searchInput) {\n        _this.prevSearch = undefined;\n        _this.searchInput.innerHTML = value;\n      }\n\n      if (typeof onSearch === 'function') {\n        onSearch(value);\n      }\n    };\n\n    _this.renderList = function () {\n      var _cs;\n\n      var _this$props3 = _this.props,\n          addNewItem = _this$props3.addNewItem,\n          searchable = _this$props3.searchable,\n          listRenderer = _this$props3.listRenderer,\n          virtualized = _this$props3.virtualized,\n          s = _this$props3.s,\n          renderVirtualizedList = _this$props3.renderVirtualizedList;\n      var opened = _this.state.opened;\n\n      if (!opened) {\n        return undefined;\n      }\n\n      var options = _this.getOptions();\n\n      var selectedOptions = _this.getSelectedOptions();\n\n      if (typeof listRenderer === 'function') {\n        return listRenderer(options, selectedOptions, _this.renderOption, _this.onChange, _this.onToggle);\n      }\n\n      var _this$getListProps = _this.getListProps(),\n          direction = _this$getListProps.direction,\n          calculatedListHeight = _this$getListProps.calculatedListHeight;\n\n      var listClasses = (0, _classnames2.default)('dd__list', s.dd__list, 'dd__openTo' + direction, s['dd__openTo' + direction], (_cs = {}, _defineProperty(_cs, s.dd__listVirtualized, virtualized), _defineProperty(_cs, 'dd__listVirtualized', virtualized), _cs));\n\n      var rowCount = _this.getCount(options);\n\n      if (rowCount && typeof renderVirtualizedList === 'function') {\n        var rowClassName = (0, _classnames2.default)('dd__optionVirtualized', s.dd__optionVirtualized);\n        return renderVirtualizedList({\n          rowRenderer: function rowRenderer(_ref) {\n            var style = _ref.style,\n                index = _ref.index;\n            return _this.renderOption(_this.getProp(options, index), selectedOptions, style);\n          },\n          rowCount: rowCount,\n          calculatedListHeight: calculatedListHeight,\n          getOptionHeight: _this.getOptionHeight,\n          listClasses: listClasses,\n          rowClassName: rowClassName\n        });\n      }\n\n      var listContent = void 0;\n\n      if (rowCount) {\n        listContent = options.map(function (option) {\n          return _this.renderOption(option, selectedOptions);\n        });\n      } else {\n        listContent = addNewItem && searchable && _this.getSearchString() ? _this.renderAddNewItem() : _this.renderNoItemsFound();\n      }\n\n      return _react2.default.createElement('div', {\n        className: listClasses,\n        style: {\n          maxHeight: calculatedListHeight + 'px'\n        }\n      }, listContent);\n    };\n\n    _this.renderOption = function (option, selectedOptions, style) {\n      var _this$props4 = _this.props,\n          valueKey = _this$props4.valueKey,\n          labelKey = _this$props4.labelKey,\n          optionRenderer = _this$props4.optionRenderer,\n          s = _this$props4.s;\n      var isSelected = selectedOptions.some(function (selected) {\n        return _this.getProp(selected, valueKey) === _this.getProp(option, valueKey);\n      });\n      var className = (0, _classnames2.default)('dd__option', s.dd__option, _defineProperty({\n        dd__selectedOption: isSelected\n      }, s.dd__selectedOption, isSelected));\n      var label = typeof optionRenderer === 'function' ? optionRenderer(option, selectedOptions) : _react2.default.createElement('div', {\n        className: className\n      }, _this.getProp(option, labelKey));\n      return _react2.default.createElement('div', {\n        key: _this.getProp(option, valueKey),\n        style: style,\n        onClick: _this.onChange(option)\n      }, label);\n    };\n\n    _this.renderSelectedBlock = function () {\n      var _this$props5 = _this.props,\n          placeholder = _this$props5.placeholder,\n          searchable = _this$props5.searchable,\n          multiple = _this$props5.multiple,\n          s = _this$props5.s,\n          selectedValueRenderer = _this$props5.selectedValueRenderer,\n          selectedBlockRenderer = _this$props5.selectedBlockRenderer;\n      var opened = _this.state.opened;\n      var valueRenderer = selectedValueRenderer || _this.renderSelectedItem;\n\n      var selectedOptions = _this.getSelectedOptions();\n\n      if (selectedBlockRenderer) {\n        return selectedBlockRenderer(selectedOptions, _this.onChange, valueRenderer, _this.renderSearchInput);\n      }\n\n      var selectedBlockClasses = (0, _classnames2.default)('dd__selected', s.dd__selected);\n      var placeholderClasses = (0, _classnames2.default)('dd__placeholder', s.dd__placeholder);\n      var noOptionsSelected = !_this.getCount(selectedOptions);\n      var selectedElements = void 0;\n\n      if (!noOptionsSelected && (multiple || !searchable || !opened)) {\n        selectedElements = selectedOptions.map(function (option) {\n          return valueRenderer(option, _this.onChange);\n        });\n      }\n\n      return _react2.default.createElement('div', {\n        className: selectedBlockClasses\n      }, selectedElements, noOptionsSelected && (!searchable || !opened) && _react2.default.createElement('div', {\n        className: placeholderClasses\n      }, placeholder), searchable && _this.renderSearchInput());\n    };\n\n    _this.renderSearchInput = function () {\n      var _this$props6 = _this.props,\n          s = _this$props6.s,\n          searchInputRenderer = _this$props6.searchInputRenderer;\n\n      var selectedOptions = _this.getSelectedOptions();\n\n      var className = (0, _classnames2.default)('dd__search', s.dd__search);\n\n      if (typeof searchInputRenderer === 'function') {\n        return searchInputRenderer(selectedOptions, _this.onSearch);\n      }\n\n      return _react2.default.createElement('div', {\n        contentEditable: true,\n        tabIndex: 0,\n        className: className,\n        onInput: _this.onSearch,\n        onKeyDown: _this.onSearch,\n        onFocus: _this.onSearch,\n        onClick: _this.onSearch,\n        onPaste: _this.onSearch,\n        onKeyUp: _this.onSearch,\n        ref: function ref(e) {\n          _this.searchInput = e;\n        }\n      });\n    };\n\n    _this.renderSelectedItem = function (option) {\n      var _this$props7 = _this.props,\n          valueKey = _this$props7.valueKey,\n          labelKey = _this$props7.labelKey,\n          multiple = _this$props7.multiple,\n          s = _this$props7.s;\n      var selectedOptionClasses = (0, _classnames2.default)('dd__selectedItem', s.dd__selectedItem);\n      var crossIconClasses = (0, _classnames2.default)('dd__crossIcon', s.dd__crossIcon);\n      return _react2.default.createElement('div', {\n        className: selectedOptionClasses,\n        key: _this.getProp(option, valueKey)\n      }, _react2.default.createElement('div', null, _this.getProp(option, labelKey)), multiple && _react2.default.createElement('div', {\n        className: crossIconClasses,\n        onClick: _this.onRemoveSelected(option)\n      }, '\\xD7'));\n    };\n\n    _this.renderIcon = function () {\n      var _this$props8 = _this.props,\n          iconRenderer = _this$props8.iconRenderer,\n          s = _this$props8.s;\n      var opened = _this.state.opened;\n\n      if (typeof iconRenderer === 'function') {\n        return iconRenderer(opened);\n      }\n\n      var className = (0, _classnames2.default)('dd__expandIcon', s.dd__expandIcon);\n      var path = 'M315,1318.04l-4.5,4.96-4.5-4.96,0.944-1.04,3.557,3.92,3.553-3.92,0.944,1.04m-9-5.08,4.5-4.96,4.5,4.96-0.944,1.04-3.557-3.92-3.553,3.92L306,1312.96'; // eslint-disable-line max-len\n\n      return _react2.default.createElement('svg', {\n        className: className,\n        viewBox: '0 0 9 15',\n        width: '9px',\n        height: '15px'\n      }, _react2.default.createElement('path', {\n        d: path,\n        transform: 'translate(-306 -1308)'\n      }));\n    };\n\n    _this.renderAddNewItem = function () {\n      var _this$props9 = _this.props,\n          s = _this$props9.s,\n          addNewItem = _this$props9.addNewItem;\n      var classNames = (0, _classnames2.default)('dd__option', s.dd__option);\n\n      if (addNewItem === false) {\n        return null;\n      }\n\n      var search = _this.getSearchString();\n\n      if (typeof addNewItem === 'function') {\n        return addNewItem(search, _this.onAddNewItem);\n      }\n\n      return _react2.default.createElement('div', {\n        className: classNames,\n        onClick: _this.onAddNewItem\n      }, typeof addNewItem === 'undefined' || addNewItem === true ? 'Add \\'' + search + '\\'' : addNewItem);\n    };\n\n    _this.renderNoItemsFound = function () {\n      var _this$props10 = _this.props,\n          s = _this$props10.s,\n          noItemsFound = _this$props10.noItemsFound;\n      var classNames = (0, _classnames2.default)('dd__option', 'dd__optionDisabled', s.dd__option, s.dd__optionDisabled);\n\n      if (noItemsFound === false) {\n        return null;\n      }\n\n      if (typeof noItemsFound === 'function') {\n        return noItemsFound();\n      }\n\n      return _react2.default.createElement('div', {\n        className: classNames\n      }, typeof noItemsFound === 'undefined' || noItemsFound === true ? 'No items found' : noItemsFound);\n    };\n\n    _this.getProp = function (option, key) {\n      var immutable = _this.props.immutable;\n      return immutable ? option.get(key) : option[key];\n    };\n\n    _this.getCount = function (items) {\n      var immutable = _this.props.immutable;\n\n      if (!items) {\n        return false;\n      }\n\n      return immutable ? items.size : items.length;\n    };\n\n    _this.getOptions = function () {\n      var _this$props11 = _this.props,\n          options = _this$props11.options,\n          labelKey = _this$props11.labelKey,\n          valueKey = _this$props11.valueKey;\n\n      if (_this.getCount(options)) {\n        // options are objects\n        if (_typeof(_this.getProp(options, 0)) === 'object') {\n          return options;\n        } // options are strings or numbers\n\n\n        return options.map(function (option) {\n          var _this$validateDataStr2;\n\n          return _this.validateDataStructure((_this$validateDataStr2 = {}, _defineProperty(_this$validateDataStr2, labelKey, option), _defineProperty(_this$validateDataStr2, valueKey, option), _this$validateDataStr2));\n        });\n      } // no options\n\n\n      return _this.validateDataStructure([]);\n    };\n\n    _this.getSelectedOptions = function () {\n      var _this$props12 = _this.props,\n          value = _this$props12.value,\n          multiple = _this$props12.multiple;\n\n      var options = _this.getOptions();\n\n      if (typeof value === 'undefined' || multiple && !_this.getCount(value)) {\n        return _this.validateDataStructure([]);\n      }\n\n      var patchedOptions = multiple ? value.map(function (v) {\n        return _this.patchSelectedOption(v, options);\n      }) : [_this.patchSelectedOption(value, options)];\n      return _this.validateDataStructure(patchedOptions.filter(function (option) {\n        return !!option;\n      }));\n    };\n\n    _this.getListProps = function () {\n      var _this$props13 = _this.props,\n          listHeight = _this$props13.listHeight,\n          listMaxHeight = _this$props13.listMaxHeight,\n          listPosition = _this$props13.listPosition,\n          boundaryMargin = _this$props13.boundaryMargin,\n          options = _this$props13.options;\n      var direction = void 0;\n\n      if (_this.ssr) {\n        return {\n          direction: DEFAULT_LIST_POSITION,\n          calculatedListHeight: listHeight || listMaxHeight\n        };\n      }\n\n      var refinedHeight = 0;\n\n      if (listHeight) {\n        refinedHeight = listHeight;\n      } else {\n        var optionsCount = _this.getCount(options);\n\n        if (optionsCount) {\n          for (var i = 0; i < optionsCount; i += 1) {\n            if (refinedHeight >= listMaxHeight) {\n              refinedHeight = listMaxHeight;\n              break;\n            }\n\n            refinedHeight += _this.getOptionHeight({\n              index: i\n            });\n          }\n        } else {\n          refinedHeight = _this.getOptionHeight({\n            index: -1\n          });\n        }\n      }\n\n      var _this$getOffset = _this.getOffset(),\n          top = _this$getOffset.top,\n          bottom = _this$getOffset.bottom;\n\n      if (listPosition === 'auto') {\n        direction = bottom < refinedHeight + boundaryMargin && top > bottom ? 'top' : 'bottom';\n      } else {\n        direction = listPosition;\n      }\n\n      var calculatedListHeight = void 0;\n\n      if (listHeight) {\n        calculatedListHeight = listHeight;\n      } else {\n        var maxAvailableHeight = (direction === 'top' ? top : bottom) - boundaryMargin;\n        calculatedListHeight = Math.min(maxAvailableHeight, refinedHeight);\n      }\n\n      return {\n        direction: direction,\n        calculatedListHeight: calculatedListHeight\n      };\n    };\n\n    _this.getOffset = function () {\n      if (_this.ssr || !_this.el) {\n        return {\n          top: 0,\n          bottom: 0\n        };\n      }\n\n      var getWrapper = _this.props.getWrapper;\n      var wrapper = getWrapper();\n\n      var rectEl = _this.el.getBoundingClientRect();\n\n      if (wrapper) {\n        // calculate offsets based on wrapper position\n        var rectWrapper = wrapper.getBoundingClientRect();\n        return {\n          top: rectEl.top - rectWrapper.top,\n          bottom: rectWrapper.bottom - rectEl.bottom\n        };\n      } // calculate offsets based on viewport\n\n\n      var viewportHeight = window.document.documentElement.clientHeight;\n      return {\n        top: rectEl.top,\n        bottom: viewportHeight - rectEl.bottom\n      };\n    };\n\n    _this.getOptionHeight = function (_ref2) {\n      var index = _ref2.index;\n      var _this$props14 = _this.props,\n          optionHeight = _this$props14.optionHeight,\n          options = _this$props14.options;\n      return typeof optionHeight === 'function' ? optionHeight(_this.getProp(options, index)) : optionHeight;\n    };\n\n    _this.getSearchString = function () {\n      return (_this.searchInput.textContent || _this.searchInput.innerText || '').replace(/\\n/g, '');\n    };\n\n    _this.onChange = function (option, removeFromSelectedBlock) {\n      return function () {\n        var _this$props15 = _this.props,\n            multiple = _this$props15.multiple,\n            immutable = _this$props15.immutable,\n            onChange = _this$props15.onChange,\n            valueKey = _this$props15.valueKey,\n            labelKey = _this$props15.labelKey,\n            searchDefaultsToSelectedValue = _this$props15.searchDefaultsToSelectedValue;\n        var selectedValue = void 0;\n\n        if (multiple) {\n          // prepare values for multiselect\n          var values = _this.getSelectedOptions();\n\n          var selectedIndex = values.findIndex(function (v) {\n            return _this.getProp(v, valueKey) === _this.getProp(option, valueKey);\n          });\n\n          if (selectedIndex === -1) {\n            // add new option to selected values\n            selectedValue = immutable ? values.push(option) : [].concat(_toConsumableArray(values), [option]);\n          } else {\n            // remove option from selected values\n            selectedValue = values.filter(function (v, i) {\n              return i !== selectedIndex;\n            });\n          }\n        } else {\n          selectedValue = option;\n        }\n\n        if (onChange(selectedValue, removeFromSelectedBlock) === false) {\n          _this.skipEventPropagation();\n        }\n\n        if (searchDefaultsToSelectedValue) {\n          _this.setSearchValue(_this.getProp(option, labelKey));\n        }\n      };\n    };\n\n    _this.onRemoveSelected = function (option) {\n      return function (e) {\n        _this.skipEventPropagation();\n\n        _this.onChange(option, true)(e);\n      };\n    };\n\n    _this.onToggle = function (e) {\n      if (_this.skipPropagation) {\n        return;\n      }\n\n      var _this$props16 = _this.props,\n          searchable = _this$props16.searchable,\n          beforeOpen = _this$props16.beforeOpen,\n          beforeClose = _this$props16.beforeClose,\n          isOpened = _this$props16.isOpened,\n          disabled = _this$props16.disabled,\n          opened = _this.state.opened;\n      var nextState = isOpened !== undefined ? isOpened : !opened;\n      var beforeFunc = nextState ? beforeOpen : beforeClose;\n\n      if (!disabled && nextState !== opened && beforeFunc(e) !== false) {\n        var afterFunc = nextState ? _this.onOpen : _this.onClose;\n\n        _this.skipEventPropagation();\n\n        if (searchable && _this.searchInput) {\n          if (nextState) {\n            _this.searchInput.focus();\n          } else {\n            _this.searchInput.blur();\n\n            window.getSelection().removeAllRanges();\n          }\n        }\n\n        _this.setState({\n          opened: nextState\n        }, afterFunc);\n      }\n    };\n\n    _this.onSearch = function (evt) {\n      // `document.documentMode` isn't undefined in IE only.\n      // See more https://msdn.microsoft.com/library/cc196988(v=vs.85).aspx\n      if (!_this.searchInput || evt.type === 'keyup' && !document.documentMode) {\n        return;\n      }\n\n      var doSearch = function doSearch() {\n        var search = _this.getSearchString();\n\n        if (search !== _this.prevSearch) {\n          _this.setState({\n            search: search\n          });\n\n          var onSearch = _this.props.onSearch;\n\n          if (typeof onSearch === 'function') {\n            onSearch(search);\n          }\n        }\n\n        _this.prevSearch = search;\n      };\n\n      if (!_this.skipPropagation) {\n        var opened = _this.state.opened;\n\n        switch (evt.type) {\n          case 'paste':\n            // strip html tags\n            evt.preventDefault(); // Get pasted data via clipboard API\n\n            var clipboardData = evt.clipboardData || window.clipboardData;\n            var newContent = _this.searchInput.textContent + clipboardData.getData('Text'); // set new content\n\n            _this.searchInput.textContent = newContent; // place cursor to the end\n\n            var range = document.createRange();\n            range.selectNodeContents(_this.searchInput);\n            range.collapse(false);\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range); // trigger search\n\n            doSearch();\n            break;\n\n          case 'focus':\n            // open dropdown onFocus\n            if (!opened) {\n              _this.onToggle(evt);\n\n              _this.skipPropagation = undefined;\n            }\n\n            break;\n\n          case 'click':\n            // do not close dropdown onClick\n            if (opened) {\n              _this.skipEventPropagation();\n            }\n\n            break;\n\n          case 'keydown':\n            if (evt.nativeEvent.keyCode === 9 && opened) {\n              // close dropdown on Tab keydown\n              // blur via Tab\n              _this.onToggle(evt);\n\n              _this.skipPropagation = undefined;\n            } else if (evt.nativeEvent.keyCode === 13) {\n              // restrict new line\n              evt.preventDefault();\n            }\n\n            break;\n\n          case 'input':\n          case 'keyup':\n            doSearch();\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n\n    _this.onAddNewItem = function (params) {\n      var onAddNewItem = _this.props.onAddNewItem;\n\n      if (typeof onAddNewItem === 'function') {\n        onAddNewItem(_this.getSearchString(), _this.getSelectedOptions(), params);\n      }\n    };\n\n    _this.onOpen = function () {\n      var onOpen = _this.props.onOpen;\n\n      if (typeof onOpen === 'function') {\n        onOpen();\n      }\n    };\n\n    _this.onClose = function () {\n      var _this$props17 = _this.props,\n          onClose = _this$props17.onClose,\n          searchClearOnClose = _this$props17.searchClearOnClose,\n          searchDefaultsToSelectedValue = _this$props17.searchDefaultsToSelectedValue;\n      var search = _this.state.search;\n\n      if (!searchDefaultsToSelectedValue && searchClearOnClose && search) {\n        _this.setSearchValue('');\n      }\n\n      if (typeof onClose === 'function') {\n        onClose();\n      }\n    };\n\n    _this.state = {\n      opened: props.isOpened === undefined ? false : props.isOpened,\n      search: ''\n    };\n    _this.ssr = typeof window === 'undefined';\n    return _this;\n  }\n  /** **************************************\n   ************ Lifecycle events ************\n   **************************************** */\n\n\n  _createClass(ReactSelectMe, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('click', this.closeGlobal);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.closeGlobal);\n    }\n    /** **************************************\n     **************** Utils *******************\n     **************************************** */\n\n  }, {\n    key: 'warn',\n    value: function warn(msg) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(msg); // eslint-disable-line no-console\n      }\n    }\n    /** **************************************\n     ************** Renderers *****************\n     **************************************** */\n\n    /** **************************************\n     *************** Getters ******************\n     **************************************** */\n\n    /** **************************************\n     **************** Events ******************\n     **************************************** */\n\n  }, {\n    key: 'render',\n\n    /** **************************************\n     **************** Render ******************\n     **************************************** */\n    value: function render() {\n      var _cs3,\n          _this2 = this;\n\n      var _props = this.props,\n          error = _props.error,\n          multiple = _props.multiple,\n          disabled = _props.disabled,\n          s = _props.s;\n      var opened = this.state.opened; // classnames\n\n      var wrapperClassnames = (0, _classnames2.default)('dd__wrapper', s.dd__wrapper, (_cs3 = {\n        dd__opened: opened,\n        dd__error: error,\n        dd__multi: multiple,\n        dd__disabled: disabled\n      }, _defineProperty(_cs3, s.dd__opened, opened), _defineProperty(_cs3, s.dd__error, error), _defineProperty(_cs3, s.dd__multi, multiple), _defineProperty(_cs3, s.dd__disabled, disabled), _cs3));\n      var selectControlClasses = (0, _classnames2.default)('dd__selectControl', s.dd__selectControl);\n      var toggleHandler = this.onToggle;\n      return _react2.default.createElement('div', {\n        className: wrapperClassnames\n      }, _react2.default.createElement('div', {\n        className: selectControlClasses,\n        onClick: toggleHandler,\n        ref: function ref(el) {\n          _this2.el = el;\n        }\n      }, this.renderSelectedBlock(), this.renderIcon()), this.renderList());\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(_ref3, state) {\n      var isOpened = _ref3.isOpened;\n      var opened = state.opened;\n\n      if (isOpened !== undefined && opened !== isOpened) {\n        return _extends({}, state, {\n          opened: isOpened\n        });\n      }\n\n      return state;\n    }\n  }]);\n\n  return ReactSelectMe;\n}(_react.PureComponent);\n\nexports.default = ReactSelectMe;\nReactSelectMe.defaultProps = _propsDefinitions.defaultProps;\nReactSelectMe.propTypes = _propsDefinitions.propTypes;","map":{"version":3,"sources":["/Users/sejaldua/Desktop/Fall2020/misc/stock-ticker-react/client/node_modules/react-select-me/lib/ReactSelectMe.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_classnames","_classnames2","_propsDefinitions","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","DEFAULT_LIST_POSITION","ReactSelectMe","_PureComponent","_this","getPrototypeOf","closeGlobal","e","_this$props","isOpened","beforeClose","opened","state","skipPropagation","undefined","setState","onClose","skipEventPropagation","validateDataStructure","data","toImmutable","patchSelectedOption","selectedOption","options","_this$validateDataStr","_this$props2","valueKey","labelKey","forbidPhantomSelection","option","find","o","getProp","setSearchValue","onSearch","search","searchInput","prevSearch","innerHTML","renderList","_cs","_this$props3","addNewItem","searchable","listRenderer","virtualized","s","renderVirtualizedList","getOptions","selectedOptions","getSelectedOptions","renderOption","onChange","onToggle","_this$getListProps","getListProps","direction","calculatedListHeight","listClasses","dd__list","dd__listVirtualized","rowCount","getCount","rowClassName","dd__optionVirtualized","rowRenderer","_ref","style","index","getOptionHeight","listContent","map","getSearchString","renderAddNewItem","renderNoItemsFound","createElement","className","maxHeight","_this$props4","optionRenderer","isSelected","some","selected","dd__option","dd__selectedOption","label","onClick","renderSelectedBlock","_this$props5","placeholder","multiple","selectedValueRenderer","selectedBlockRenderer","valueRenderer","renderSelectedItem","renderSearchInput","selectedBlockClasses","dd__selected","placeholderClasses","dd__placeholder","noOptionsSelected","selectedElements","_this$props6","searchInputRenderer","dd__search","contentEditable","tabIndex","onInput","onKeyDown","onFocus","onPaste","onKeyUp","ref","_this$props7","selectedOptionClasses","dd__selectedItem","crossIconClasses","dd__crossIcon","onRemoveSelected","renderIcon","_this$props8","iconRenderer","dd__expandIcon","path","viewBox","width","height","d","transform","_this$props9","classNames","onAddNewItem","_this$props10","noItemsFound","dd__optionDisabled","immutable","get","items","size","_this$props11","_this$validateDataStr2","_this$props12","patchedOptions","v","filter","_this$props13","listHeight","listMaxHeight","listPosition","boundaryMargin","ssr","refinedHeight","optionsCount","_this$getOffset","getOffset","top","bottom","maxAvailableHeight","Math","min","el","getWrapper","wrapper","rectEl","getBoundingClientRect","rectWrapper","viewportHeight","window","document","documentElement","clientHeight","_ref2","_this$props14","optionHeight","textContent","innerText","replace","removeFromSelectedBlock","_this$props15","searchDefaultsToSelectedValue","selectedValue","values","selectedIndex","findIndex","push","concat","_this$props16","beforeOpen","disabled","nextState","beforeFunc","afterFunc","onOpen","focus","blur","getSelection","removeAllRanges","evt","type","documentMode","doSearch","preventDefault","clipboardData","newContent","getData","range","createRange","selectNodeContents","collapse","selection","addRange","nativeEvent","keyCode","params","_this$props17","searchClearOnClose","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","warn","msg","process","env","NODE_ENV","console","render","_cs3","_this2","_props","error","wrapperClassnames","dd__wrapper","dd__opened","dd__error","dd__multi","dd__disabled","selectControlClasses","dd__selectControl","toggleHandler","getDerivedStateFromProps","_ref3","PureComponent","defaultProps","propTypes"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;;AAIA,IAAIC,QAAQ,GAAGJ,MAAM,CAACK,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIV,MAAM,CAACY,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,IAAIS,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA3D,GAAsE,UAAUC,GAAV,EAAe;AAAE,SAAO,OAAOA,GAAd;AAAoB,CAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,GAAG,IAAI,OAAOF,MAAP,KAAkB,UAAzB,IAAuCE,GAAG,CAACC,WAAJ,KAAoBH,MAA3D,IAAqEE,GAAG,KAAKF,MAAM,CAACJ,SAApF,GAAgG,QAAhG,GAA2G,OAAOM,GAAzH;AAA+H,CAA5Q;;AAEA,IAAIE,YAAY,GAAG,YAAY;AAAE,WAASC,gBAAT,CAA0Bf,MAA1B,EAAkCgB,KAAlC,EAAyC;AAAE,SAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,KAAK,CAACb,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AAAE,UAAIgB,UAAU,GAAGD,KAAK,CAACf,CAAD,CAAtB;AAA2BgB,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B1B,MAAAA,MAAM,CAACC,cAAP,CAAsBK,MAAtB,EAA8BiB,UAAU,CAACZ,GAAzC,EAA8CY,UAA9C;AAA4D;AAAE;;AAAC,SAAO,UAAUI,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBP,gBAAgB,CAACM,WAAW,CAACf,SAAb,EAAwBgB,UAAxB,CAAhB;AAAqD,QAAIC,WAAJ,EAAiBR,gBAAgB,CAACM,WAAD,EAAcE,WAAd,CAAhB;AAA4C,WAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA9hB,EAAnB;;AAEA,IAAIG,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,OAAO,GAAGC,sBAAsB,CAACH,MAAD,CAApC;;AAEA,IAAII,WAAW,GAAGH,OAAO,CAAC,YAAD,CAAzB;;AAEA,IAAII,YAAY,GAAGF,sBAAsB,CAACC,WAAD,CAAzC;;AAEA,IAAIE,iBAAiB,GAAGL,OAAO,CAAC,oBAAD,CAA/B;;AAEA,SAASE,sBAAT,CAAgCf,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACmB,UAAX,GAAwBnB,GAAxB,GAA8B;AAAEoB,IAAAA,OAAO,EAAEpB;AAAX,GAArC;AAAwD;;AAE/F,SAASqB,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,MAAIC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAJ,EAAwB;AAAE,SAAK,IAAIjC,CAAC,GAAG,CAAR,EAAWoC,IAAI,GAAGF,KAAK,CAACD,GAAG,CAAC/B,MAAL,CAA5B,EAA0CF,CAAC,GAAGiC,GAAG,CAAC/B,MAAlD,EAA0DF,CAAC,EAA3D,EAA+D;AAAEoC,MAAAA,IAAI,CAACpC,CAAD,CAAJ,GAAUiC,GAAG,CAACjC,CAAD,CAAb;AAAmB;;AAAC,WAAOoC,IAAP;AAAc,GAA7H,MAAmI;AAAE,WAAOF,KAAK,CAACG,IAAN,CAAWJ,GAAX,CAAP;AAAyB;AAAE;;AAEnM,SAASK,eAAT,CAAyB3B,GAAzB,EAA8BP,GAA9B,EAAmCR,KAAnC,EAA0C;AAAE,MAAIQ,GAAG,IAAIO,GAAX,EAAgB;AAAElB,IAAAA,MAAM,CAACC,cAAP,CAAsBiB,GAAtB,EAA2BP,GAA3B,EAAgC;AAAER,MAAAA,KAAK,EAAEA,KAAT;AAAgBqB,MAAAA,UAAU,EAAE,IAA5B;AAAkCC,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAER,IAAAA,GAAG,CAACP,GAAD,CAAH,GAAWR,KAAX;AAAmB;;AAAC,SAAOe,GAAP;AAAa;;AAEjN,SAAS4B,eAAT,CAAyBC,QAAzB,EAAmCpB,WAAnC,EAAgD;AAAE,MAAI,EAAEoB,QAAQ,YAAYpB,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIqB,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0CpC,IAA1C,EAAgD;AAAE,MAAI,CAACoC,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOrC,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0EoC,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIN,SAAJ,CAAc,6DAA6D,OAAOM,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACzC,SAAT,GAAqBZ,MAAM,CAACuD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC1C,SAAvC,EAAkD;AAAEO,IAAAA,WAAW,EAAE;AAAEhB,MAAAA,KAAK,EAAEkD,QAAT;AAAmB7B,MAAAA,UAAU,EAAE,KAA/B;AAAsCE,MAAAA,QAAQ,EAAE,IAAhD;AAAsDD,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAI6B,UAAJ,EAAgBtD,MAAM,CAACwD,cAAP,GAAwBxD,MAAM,CAACwD,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACI,SAAT,GAAqBH,UAA3F;AAAwG,C,CAAC;AAC/e;AACA;;;AAEA,IAAII,qBAAqB,GAAG,QAA5B;;AAEA,IAAIC,aAAa,GAAG,UAAUC,cAAV,EAA0B;AAC5CR,EAAAA,SAAS,CAACO,aAAD,EAAgBC,cAAhB,CAAT;;AAEA,WAASD,aAAT,CAAuBrC,KAAvB,EAA8B;AAC5BwB,IAAAA,eAAe,CAAC,IAAD,EAAOa,aAAP,CAAf;;AAEA,QAAIE,KAAK,GAAGZ,0BAA0B,CAAC,IAAD,EAAO,CAACU,aAAa,CAACF,SAAd,IAA2BzD,MAAM,CAAC8D,cAAP,CAAsBH,aAAtB,CAA5B,EAAkE7C,IAAlE,CAAuE,IAAvE,EAA6EQ,KAA7E,CAAP,CAAtC;;AAEAuC,IAAAA,KAAK,CAACE,WAAN,GAAoB,UAAUC,CAAV,EAAa;AAC/B,UAAIC,WAAW,GAAGJ,KAAK,CAACvC,KAAxB;AAAA,UACI4C,QAAQ,GAAGD,WAAW,CAACC,QAD3B;AAAA,UAEIC,WAAW,GAAGF,WAAW,CAACE,WAF9B;AAGA,UAAIC,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MAAzB,CAJ+B,CAK/B;AACA;;AAEA,UAAIP,KAAK,CAACS,eAAN,IAAyB,CAACF,MAA9B,EAAsC;AACpCP,QAAAA,KAAK,CAACS,eAAN,GAAwBC,SAAxB;AACA;AACD;;AAED,UAAI,CAACL,QAAD,IAAaC,WAAW,CAACH,CAAD,CAAX,KAAmB,KAApC,EAA2C;AACzCH,QAAAA,KAAK,CAACW,QAAN,CAAe;AAAEJ,UAAAA,MAAM,EAAE;AAAV,SAAf,EAAkCP,KAAK,CAACY,OAAxC;AACD;AACF,KAhBD;;AAkBAZ,IAAAA,KAAK,CAACa,oBAAN,GAA6B,YAAY;AACvCb,MAAAA,KAAK,CAACS,eAAN,GAAwB,IAAxB;AACD,KAFD;;AAIAT,IAAAA,KAAK,CAACc,qBAAN,GAA8B,UAAUC,IAAV,EAAgB;AAC5C,UAAIC,WAAW,GAAGhB,KAAK,CAACvC,KAAN,CAAYuD,WAA9B;AAEA,aAAO,OAAOA,WAAP,KAAuB,UAAvB,GAAoCA,WAAW,CAACD,IAAD,CAA/C,GAAwDA,IAA/D;AACD,KAJD;;AAMAf,IAAAA,KAAK,CAACiB,mBAAN,GAA4B,UAAUC,cAAV,EAA0BC,OAA1B,EAAmC;AAC7D,UAAIC,qBAAJ;;AAEA,UAAIC,YAAY,GAAGrB,KAAK,CAACvC,KAAzB;AAAA,UACI6D,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,UAEIC,QAAQ,GAAGF,YAAY,CAACE,QAF5B;AAAA,UAGIC,sBAAsB,GAAGH,YAAY,CAACG,sBAH1C,CAH6D,CAQ7D;;AAEA,UAAIlF,KAAK,GAAG,CAAC,OAAO4E,cAAP,KAA0B,WAA1B,GAAwC,WAAxC,GAAsDhE,OAAO,CAACgE,cAAD,CAA9D,MAAoF,QAApF,GAA+FA,cAAc,CAACI,QAAD,CAA7G,GAA0HJ,cAAtI;AACA,UAAIO,MAAM,GAAGN,OAAO,CAACO,IAAR,CAAa,UAAUC,CAAV,EAAa;AACrC,eAAO3B,KAAK,CAAC4B,OAAN,CAAcD,CAAd,EAAiBL,QAAjB,MAA+BhF,KAAtC;AACD,OAFY,CAAb;;AAIA,UAAImF,MAAM,IAAID,sBAAd,EAAsC;AACpC,eAAOC,MAAP;AACD,OAjB4D,CAmB7D;;;AACA,aAAO,CAAC,OAAOP,cAAP,KAA0B,WAA1B,GAAwC,WAAxC,GAAsDhE,OAAO,CAACgE,cAAD,CAA9D,MAAoF,QAApF,GAA+FA,cAA/F,GAAgHlB,KAAK,CAACc,qBAAN,EAA6BM,qBAAqB,GAAG,EAAxB,EAA4BpC,eAAe,CAACoC,qBAAD,EAAwBE,QAAxB,EAAkCJ,cAAlC,CAA3C,EAA8FlC,eAAe,CAACoC,qBAAD,EAAwBG,QAAxB,EAAkCL,cAAlC,CAA7G,EAAgKE,qBAA7L,EAAvH;AACD,KArBD;;AAuBApB,IAAAA,KAAK,CAAC6B,cAAN,GAAuB,UAAUvF,KAAV,EAAiB;AACtC,UAAIwF,QAAQ,GAAG9B,KAAK,CAACvC,KAAN,CAAYqE,QAA3B;;AAEA9B,MAAAA,KAAK,CAACW,QAAN,CAAe;AACboB,QAAAA,MAAM,EAAEzF;AADK,OAAf;;AAIA,UAAI0D,KAAK,CAACgC,WAAV,EAAuB;AACrBhC,QAAAA,KAAK,CAACiC,UAAN,GAAmBvB,SAAnB;AACAV,QAAAA,KAAK,CAACgC,WAAN,CAAkBE,SAAlB,GAA8B5F,KAA9B;AACD;;AAED,UAAI,OAAOwF,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,QAAAA,QAAQ,CAACxF,KAAD,CAAR;AACD;AACF,KAfD;;AAiBA0D,IAAAA,KAAK,CAACmC,UAAN,GAAmB,YAAY;AAC7B,UAAIC,GAAJ;;AAEA,UAAIC,YAAY,GAAGrC,KAAK,CAACvC,KAAzB;AAAA,UACI6E,UAAU,GAAGD,YAAY,CAACC,UAD9B;AAAA,UAEIC,UAAU,GAAGF,YAAY,CAACE,UAF9B;AAAA,UAGIC,YAAY,GAAGH,YAAY,CAACG,YAHhC;AAAA,UAIIC,WAAW,GAAGJ,YAAY,CAACI,WAJ/B;AAAA,UAKIC,CAAC,GAAGL,YAAY,CAACK,CALrB;AAAA,UAMIC,qBAAqB,GAAGN,YAAY,CAACM,qBANzC;AAOA,UAAIpC,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MAAzB;;AAGA,UAAI,CAACA,MAAL,EAAa;AACX,eAAOG,SAAP;AACD;;AAED,UAAIS,OAAO,GAAGnB,KAAK,CAAC4C,UAAN,EAAd;;AACA,UAAIC,eAAe,GAAG7C,KAAK,CAAC8C,kBAAN,EAAtB;;AAEA,UAAI,OAAON,YAAP,KAAwB,UAA5B,EAAwC;AACtC,eAAOA,YAAY,CAACrB,OAAD,EAAU0B,eAAV,EAA2B7C,KAAK,CAAC+C,YAAjC,EAA+C/C,KAAK,CAACgD,QAArD,EAA+DhD,KAAK,CAACiD,QAArE,CAAnB;AACD;;AAED,UAAIC,kBAAkB,GAAGlD,KAAK,CAACmD,YAAN,EAAzB;AAAA,UACIC,SAAS,GAAGF,kBAAkB,CAACE,SADnC;AAAA,UAEIC,oBAAoB,GAAGH,kBAAkB,CAACG,oBAF9C;;AAIA,UAAIC,WAAW,GAAG,CAAC,GAAGhF,YAAY,CAACG,OAAjB,EAA0B,UAA1B,EAAsCiE,CAAC,CAACa,QAAxC,EAAkD,eAAeH,SAAjE,EAA4EV,CAAC,CAAC,eAAeU,SAAhB,CAA7E,GAA0GhB,GAAG,GAAG,EAAN,EAAUpD,eAAe,CAACoD,GAAD,EAAMM,CAAC,CAACc,mBAAR,EAA6Bf,WAA7B,CAAzB,EAAoEzD,eAAe,CAACoD,GAAD,EAAM,qBAAN,EAA6BK,WAA7B,CAAnF,EAA8HL,GAAxO,EAAlB;;AAEA,UAAIqB,QAAQ,GAAGzD,KAAK,CAAC0D,QAAN,CAAevC,OAAf,CAAf;;AACA,UAAIsC,QAAQ,IAAI,OAAOd,qBAAP,KAAiC,UAAjD,EAA6D;AAC3D,YAAIgB,YAAY,GAAG,CAAC,GAAGrF,YAAY,CAACG,OAAjB,EAA0B,uBAA1B,EAAmDiE,CAAC,CAACkB,qBAArD,CAAnB;AACA,eAAOjB,qBAAqB,CAAC;AAC3BkB,UAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACtC,gBAAIC,KAAK,GAAGD,IAAI,CAACC,KAAjB;AAAA,gBACIC,KAAK,GAAGF,IAAI,CAACE,KADjB;AAEA,mBAAOhE,KAAK,CAAC+C,YAAN,CAAmB/C,KAAK,CAAC4B,OAAN,CAAcT,OAAd,EAAuB6C,KAAvB,CAAnB,EAAkDnB,eAAlD,EAAmEkB,KAAnE,CAAP;AACD,WAL0B;AAM3BN,UAAAA,QAAQ,EAAEA,QANiB;AAO3BJ,UAAAA,oBAAoB,EAAEA,oBAPK;AAQ3BY,UAAAA,eAAe,EAAEjE,KAAK,CAACiE,eARI;AAS3BX,UAAAA,WAAW,EAAEA,WATc;AAU3BK,UAAAA,YAAY,EAAEA;AAVa,SAAD,CAA5B;AAYD;;AACD,UAAIO,WAAW,GAAG,KAAK,CAAvB;;AACA,UAAIT,QAAJ,EAAc;AACZS,QAAAA,WAAW,GAAG/C,OAAO,CAACgD,GAAR,CAAY,UAAU1C,MAAV,EAAkB;AAC1C,iBAAOzB,KAAK,CAAC+C,YAAN,CAAmBtB,MAAnB,EAA2BoB,eAA3B,CAAP;AACD,SAFa,CAAd;AAGD,OAJD,MAIO;AACLqB,QAAAA,WAAW,GAAG5B,UAAU,IAAIC,UAAd,IAA4BvC,KAAK,CAACoE,eAAN,EAA5B,GAAsDpE,KAAK,CAACqE,gBAAN,EAAtD,GAAiFrE,KAAK,CAACsE,kBAAN,EAA/F;AACD;;AAED,aAAOnG,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAElB,WAAb;AAA0BS,QAAAA,KAAK,EAAE;AAAEU,UAAAA,SAAS,EAAEpB,oBAAoB,GAAG;AAApC;AAAjC,OAFK,EAGLa,WAHK,CAAP;AAKD,KA5DD;;AA8DAlE,IAAAA,KAAK,CAAC+C,YAAN,GAAqB,UAAUtB,MAAV,EAAkBoB,eAAlB,EAAmCkB,KAAnC,EAA0C;AAC7D,UAAIW,YAAY,GAAG1E,KAAK,CAACvC,KAAzB;AAAA,UACI6D,QAAQ,GAAGoD,YAAY,CAACpD,QAD5B;AAAA,UAEIC,QAAQ,GAAGmD,YAAY,CAACnD,QAF5B;AAAA,UAGIoD,cAAc,GAAGD,YAAY,CAACC,cAHlC;AAAA,UAIIjC,CAAC,GAAGgC,YAAY,CAAChC,CAJrB;AAMA,UAAIkC,UAAU,GAAG/B,eAAe,CAACgC,IAAhB,CAAqB,UAAUC,QAAV,EAAoB;AACxD,eAAO9E,KAAK,CAAC4B,OAAN,CAAckD,QAAd,EAAwBxD,QAAxB,MAAsCtB,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBH,QAAtB,CAA7C;AACD,OAFgB,CAAjB;AAGA,UAAIkD,SAAS,GAAG,CAAC,GAAGlG,YAAY,CAACG,OAAjB,EAA0B,YAA1B,EAAwCiE,CAAC,CAACqC,UAA1C,EAAsD/F,eAAe,CAAC;AACpFgG,QAAAA,kBAAkB,EAAEJ;AADgE,OAAD,EAElFlC,CAAC,CAACsC,kBAFgF,EAE5DJ,UAF4D,CAArE,CAAhB;AAIA,UAAIK,KAAK,GAAG,OAAON,cAAP,KAA0B,UAA1B,GAAuCA,cAAc,CAAClD,MAAD,EAASoB,eAAT,CAArD,GAAiF1E,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CAC3F,KAD2F,EAE3F;AAAEC,QAAAA,SAAS,EAAEA;AAAb,OAF2F,EAG3FxE,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBF,QAAtB,CAH2F,CAA7F;AAMA,aAAOpD,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEzH,QAAAA,GAAG,EAAEkD,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBH,QAAtB,CAAP;AAAwCyC,QAAAA,KAAK,EAAEA,KAA/C;AAAsDmB,QAAAA,OAAO,EAAElF,KAAK,CAACgD,QAAN,CAAevB,MAAf;AAA/D,OAFK,EAGLwD,KAHK,CAAP;AAKD,KAzBD;;AA2BAjF,IAAAA,KAAK,CAACmF,mBAAN,GAA4B,YAAY;AACtC,UAAIC,YAAY,GAAGpF,KAAK,CAACvC,KAAzB;AAAA,UACI4H,WAAW,GAAGD,YAAY,CAACC,WAD/B;AAAA,UAEI9C,UAAU,GAAG6C,YAAY,CAAC7C,UAF9B;AAAA,UAGI+C,QAAQ,GAAGF,YAAY,CAACE,QAH5B;AAAA,UAII5C,CAAC,GAAG0C,YAAY,CAAC1C,CAJrB;AAAA,UAKI6C,qBAAqB,GAAGH,YAAY,CAACG,qBALzC;AAAA,UAMIC,qBAAqB,GAAGJ,YAAY,CAACI,qBANzC;AAOA,UAAIjF,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MAAzB;AAEA,UAAIkF,aAAa,GAAGF,qBAAqB,IAAIvF,KAAK,CAAC0F,kBAAnD;;AACA,UAAI7C,eAAe,GAAG7C,KAAK,CAAC8C,kBAAN,EAAtB;;AAEA,UAAI0C,qBAAJ,EAA2B;AACzB,eAAOA,qBAAqB,CAAC3C,eAAD,EAAkB7C,KAAK,CAACgD,QAAxB,EAAkCyC,aAAlC,EAAiDzF,KAAK,CAAC2F,iBAAvD,CAA5B;AACD;;AAED,UAAIC,oBAAoB,GAAG,CAAC,GAAGtH,YAAY,CAACG,OAAjB,EAA0B,cAA1B,EAA0CiE,CAAC,CAACmD,YAA5C,CAA3B;AACA,UAAIC,kBAAkB,GAAG,CAAC,GAAGxH,YAAY,CAACG,OAAjB,EAA0B,iBAA1B,EAA6CiE,CAAC,CAACqD,eAA/C,CAAzB;AACA,UAAIC,iBAAiB,GAAG,CAAChG,KAAK,CAAC0D,QAAN,CAAeb,eAAf,CAAzB;AAEA,UAAIoD,gBAAgB,GAAG,KAAK,CAA5B;;AACA,UAAI,CAACD,iBAAD,KAAuBV,QAAQ,IAAI,CAAC/C,UAAb,IAA2B,CAAChC,MAAnD,CAAJ,EAAgE;AAC9D0F,QAAAA,gBAAgB,GAAGpD,eAAe,CAACsB,GAAhB,CAAoB,UAAU1C,MAAV,EAAkB;AACvD,iBAAOgE,aAAa,CAAChE,MAAD,EAASzB,KAAK,CAACgD,QAAf,CAApB;AACD,SAFkB,CAAnB;AAGD;;AAED,aAAO7E,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAEoB;AAAb,OAFK,EAGLK,gBAHK,EAILD,iBAAiB,KAAK,CAACzD,UAAD,IAAe,CAAChC,MAArB,CAAjB,IAAiDpC,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CAC/C,KAD+C,EAE/C;AAAEC,QAAAA,SAAS,EAAEsB;AAAb,OAF+C,EAG/CT,WAH+C,CAJ5C,EASL9C,UAAU,IAAIvC,KAAK,CAAC2F,iBAAN,EATT,CAAP;AAWD,KAvCD;;AAyCA3F,IAAAA,KAAK,CAAC2F,iBAAN,GAA0B,YAAY;AACpC,UAAIO,YAAY,GAAGlG,KAAK,CAACvC,KAAzB;AAAA,UACIiF,CAAC,GAAGwD,YAAY,CAACxD,CADrB;AAAA,UAEIyD,mBAAmB,GAAGD,YAAY,CAACC,mBAFvC;;AAIA,UAAItD,eAAe,GAAG7C,KAAK,CAAC8C,kBAAN,EAAtB;;AACA,UAAI0B,SAAS,GAAG,CAAC,GAAGlG,YAAY,CAACG,OAAjB,EAA0B,YAA1B,EAAwCiE,CAAC,CAAC0D,UAA1C,CAAhB;;AAEA,UAAI,OAAOD,mBAAP,KAA+B,UAAnC,EAA+C;AAC7C,eAAOA,mBAAmB,CAACtD,eAAD,EAAkB7C,KAAK,CAAC8B,QAAxB,CAA1B;AACD;;AAED,aAAO3D,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CAA8B,KAA9B,EAAqC;AAC1C8B,QAAAA,eAAe,EAAE,IADyB;AAE1CC,QAAAA,QAAQ,EAAE,CAFgC;AAG1C9B,QAAAA,SAAS,EAAEA,SAH+B;AAI1C+B,QAAAA,OAAO,EAAEvG,KAAK,CAAC8B,QAJ2B;AAK1C0E,QAAAA,SAAS,EAAExG,KAAK,CAAC8B,QALyB;AAM1C2E,QAAAA,OAAO,EAAEzG,KAAK,CAAC8B,QAN2B;AAO1CoD,QAAAA,OAAO,EAAElF,KAAK,CAAC8B,QAP2B;AAQ1C4E,QAAAA,OAAO,EAAE1G,KAAK,CAAC8B,QAR2B;AAS1C6E,QAAAA,OAAO,EAAE3G,KAAK,CAAC8B,QAT2B;AAU1C8E,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAazG,CAAb,EAAgB;AACnBH,UAAAA,KAAK,CAACgC,WAAN,GAAoB7B,CAApB;AACD;AAZyC,OAArC,CAAP;AAcD,KA1BD;;AA4BAH,IAAAA,KAAK,CAAC0F,kBAAN,GAA2B,UAAUjE,MAAV,EAAkB;AAC3C,UAAIoF,YAAY,GAAG7G,KAAK,CAACvC,KAAzB;AAAA,UACI6D,QAAQ,GAAGuF,YAAY,CAACvF,QAD5B;AAAA,UAEIC,QAAQ,GAAGsF,YAAY,CAACtF,QAF5B;AAAA,UAGI+D,QAAQ,GAAGuB,YAAY,CAACvB,QAH5B;AAAA,UAII5C,CAAC,GAAGmE,YAAY,CAACnE,CAJrB;AAMA,UAAIoE,qBAAqB,GAAG,CAAC,GAAGxI,YAAY,CAACG,OAAjB,EAA0B,kBAA1B,EAA8CiE,CAAC,CAACqE,gBAAhD,CAA5B;AACA,UAAIC,gBAAgB,GAAG,CAAC,GAAG1I,YAAY,CAACG,OAAjB,EAA0B,eAA1B,EAA2CiE,CAAC,CAACuE,aAA7C,CAAvB;AAEA,aAAO9I,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAEsC,qBAAb;AAAoChK,QAAAA,GAAG,EAAEkD,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBH,QAAtB;AAAzC,OAFK,EAGLnD,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACE,KADF,EAEE,IAFF,EAGEvE,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBF,QAAtB,CAHF,CAHK,EAQL+D,QAAQ,IAAInH,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACV,KADU,EAEV;AAAEC,QAAAA,SAAS,EAAEwC,gBAAb;AAA+B9B,QAAAA,OAAO,EAAElF,KAAK,CAACkH,gBAAN,CAAuBzF,MAAvB;AAAxC,OAFU,EAGV,MAHU,CARP,CAAP;AAcD,KAxBD;;AA0BAzB,IAAAA,KAAK,CAACmH,UAAN,GAAmB,YAAY;AAC7B,UAAIC,YAAY,GAAGpH,KAAK,CAACvC,KAAzB;AAAA,UACI4J,YAAY,GAAGD,YAAY,CAACC,YADhC;AAAA,UAEI3E,CAAC,GAAG0E,YAAY,CAAC1E,CAFrB;AAGA,UAAInC,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MAAzB;;AAEA,UAAI,OAAO8G,YAAP,KAAwB,UAA5B,EAAwC;AACtC,eAAOA,YAAY,CAAC9G,MAAD,CAAnB;AACD;;AAED,UAAIiE,SAAS,GAAG,CAAC,GAAGlG,YAAY,CAACG,OAAjB,EAA0B,gBAA1B,EAA4CiE,CAAC,CAAC4E,cAA9C,CAAhB;AACA,UAAIC,IAAI,GAAG,oJAAX,CAX6B,CAWoI;;AACjK,aAAOpJ,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAEA,SAAb;AAAwBgD,QAAAA,OAAO,EAAE,UAAjC;AAA6CC,QAAAA,KAAK,EAAE,KAApD;AAA2DC,QAAAA,MAAM,EAAE;AAAnE,OAFK,EAGLvJ,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CAA8B,MAA9B,EAAsC;AAAEoD,QAAAA,CAAC,EAAEJ,IAAL;AAAWK,QAAAA,SAAS,EAAE;AAAtB,OAAtC,CAHK,CAAP;AAKD,KAjBD;;AAmBA5H,IAAAA,KAAK,CAACqE,gBAAN,GAAyB,YAAY;AACnC,UAAIwD,YAAY,GAAG7H,KAAK,CAACvC,KAAzB;AAAA,UACIiF,CAAC,GAAGmF,YAAY,CAACnF,CADrB;AAAA,UAEIJ,UAAU,GAAGuF,YAAY,CAACvF,UAF9B;AAIA,UAAIwF,UAAU,GAAG,CAAC,GAAGxJ,YAAY,CAACG,OAAjB,EAA0B,YAA1B,EAAwCiE,CAAC,CAACqC,UAA1C,CAAjB;;AAEA,UAAIzC,UAAU,KAAK,KAAnB,EAA0B;AACxB,eAAO,IAAP;AACD;;AAED,UAAIP,MAAM,GAAG/B,KAAK,CAACoE,eAAN,EAAb;;AACA,UAAI,OAAO9B,UAAP,KAAsB,UAA1B,EAAsC;AACpC,eAAOA,UAAU,CAACP,MAAD,EAAS/B,KAAK,CAAC+H,YAAf,CAAjB;AACD;;AAED,aAAO5J,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAEsD,UAAb;AAAyB5C,QAAAA,OAAO,EAAElF,KAAK,CAAC+H;AAAxC,OAFK,EAGL,OAAOzF,UAAP,KAAsB,WAAtB,IAAqCA,UAAU,KAAK,IAApD,GAA2D,WAAWP,MAAX,GAAoB,IAA/E,GAAsFO,UAHjF,CAAP;AAKD,KArBD;;AAuBAtC,IAAAA,KAAK,CAACsE,kBAAN,GAA2B,YAAY;AACrC,UAAI0D,aAAa,GAAGhI,KAAK,CAACvC,KAA1B;AAAA,UACIiF,CAAC,GAAGsF,aAAa,CAACtF,CADtB;AAAA,UAEIuF,YAAY,GAAGD,aAAa,CAACC,YAFjC;AAIA,UAAIH,UAAU,GAAG,CAAC,GAAGxJ,YAAY,CAACG,OAAjB,EAA0B,YAA1B,EAAwC,oBAAxC,EAA8DiE,CAAC,CAACqC,UAAhE,EAA4ErC,CAAC,CAACwF,kBAA9E,CAAjB;;AAEA,UAAID,YAAY,KAAK,KAArB,EAA4B;AAC1B,eAAO,IAAP;AACD;;AAED,UAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACtC,eAAOA,YAAY,EAAnB;AACD;;AAED,aAAO9J,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAEsD;AAAb,OAFK,EAGL,OAAOG,YAAP,KAAwB,WAAxB,IAAuCA,YAAY,KAAK,IAAxD,GAA+D,gBAA/D,GAAkFA,YAH7E,CAAP;AAKD,KApBD;;AAsBAjI,IAAAA,KAAK,CAAC4B,OAAN,GAAgB,UAAUH,MAAV,EAAkB3E,GAAlB,EAAuB;AACrC,UAAIqL,SAAS,GAAGnI,KAAK,CAACvC,KAAN,CAAY0K,SAA5B;AAEA,aAAOA,SAAS,GAAG1G,MAAM,CAAC2G,GAAP,CAAWtL,GAAX,CAAH,GAAqB2E,MAAM,CAAC3E,GAAD,CAA3C;AACD,KAJD;;AAMAkD,IAAAA,KAAK,CAAC0D,QAAN,GAAiB,UAAU2E,KAAV,EAAiB;AAChC,UAAIF,SAAS,GAAGnI,KAAK,CAACvC,KAAN,CAAY0K,SAA5B;;AAEA,UAAI,CAACE,KAAL,EAAY;AACV,eAAO,KAAP;AACD;;AACD,aAAOF,SAAS,GAAGE,KAAK,CAACC,IAAT,GAAgBD,KAAK,CAACzL,MAAtC;AACD,KAPD;;AASAoD,IAAAA,KAAK,CAAC4C,UAAN,GAAmB,YAAY;AAC7B,UAAI2F,aAAa,GAAGvI,KAAK,CAACvC,KAA1B;AAAA,UACI0D,OAAO,GAAGoH,aAAa,CAACpH,OAD5B;AAAA,UAEII,QAAQ,GAAGgH,aAAa,CAAChH,QAF7B;AAAA,UAGID,QAAQ,GAAGiH,aAAa,CAACjH,QAH7B;;AAKA,UAAItB,KAAK,CAAC0D,QAAN,CAAevC,OAAf,CAAJ,EAA6B;AAC3B;AACA,YAAIjE,OAAO,CAAC8C,KAAK,CAAC4B,OAAN,CAAcT,OAAd,EAAuB,CAAvB,CAAD,CAAP,KAAuC,QAA3C,EAAqD;AACnD,iBAAOA,OAAP;AACD,SAJ0B,CAM3B;;;AACA,eAAOA,OAAO,CAACgD,GAAR,CAAY,UAAU1C,MAAV,EAAkB;AACnC,cAAI+G,sBAAJ;;AAEA,iBAAOxI,KAAK,CAACc,qBAAN,EAA6B0H,sBAAsB,GAAG,EAAzB,EAA6BxJ,eAAe,CAACwJ,sBAAD,EAAyBjH,QAAzB,EAAmCE,MAAnC,CAA5C,EAAwFzC,eAAe,CAACwJ,sBAAD,EAAyBlH,QAAzB,EAAmCG,MAAnC,CAAvG,EAAmJ+G,sBAAhL,EAAP;AACD,SAJM,CAAP;AAKD,OAlB4B,CAoB7B;;;AACA,aAAOxI,KAAK,CAACc,qBAAN,CAA4B,EAA5B,CAAP;AACD,KAtBD;;AAwBAd,IAAAA,KAAK,CAAC8C,kBAAN,GAA2B,YAAY;AACrC,UAAI2F,aAAa,GAAGzI,KAAK,CAACvC,KAA1B;AAAA,UACInB,KAAK,GAAGmM,aAAa,CAACnM,KAD1B;AAAA,UAEIgJ,QAAQ,GAAGmD,aAAa,CAACnD,QAF7B;;AAIA,UAAInE,OAAO,GAAGnB,KAAK,CAAC4C,UAAN,EAAd;;AAEA,UAAI,OAAOtG,KAAP,KAAiB,WAAjB,IAAgCgJ,QAAQ,IAAI,CAACtF,KAAK,CAAC0D,QAAN,CAAepH,KAAf,CAAjD,EAAwE;AACtE,eAAO0D,KAAK,CAACc,qBAAN,CAA4B,EAA5B,CAAP;AACD;;AAED,UAAI4H,cAAc,GAAGpD,QAAQ,GAAGhJ,KAAK,CAAC6H,GAAN,CAAU,UAAUwE,CAAV,EAAa;AACrD,eAAO3I,KAAK,CAACiB,mBAAN,CAA0B0H,CAA1B,EAA6BxH,OAA7B,CAAP;AACD,OAF+B,CAAH,GAExB,CAACnB,KAAK,CAACiB,mBAAN,CAA0B3E,KAA1B,EAAiC6E,OAAjC,CAAD,CAFL;AAIA,aAAOnB,KAAK,CAACc,qBAAN,CAA4B4H,cAAc,CAACE,MAAf,CAAsB,UAAUnH,MAAV,EAAkB;AACzE,eAAO,CAAC,CAACA,MAAT;AACD,OAFkC,CAA5B,CAAP;AAGD,KAlBD;;AAoBAzB,IAAAA,KAAK,CAACmD,YAAN,GAAqB,YAAY;AAC/B,UAAI0F,aAAa,GAAG7I,KAAK,CAACvC,KAA1B;AAAA,UACIqL,UAAU,GAAGD,aAAa,CAACC,UAD/B;AAAA,UAEIC,aAAa,GAAGF,aAAa,CAACE,aAFlC;AAAA,UAGIC,YAAY,GAAGH,aAAa,CAACG,YAHjC;AAAA,UAIIC,cAAc,GAAGJ,aAAa,CAACI,cAJnC;AAAA,UAKI9H,OAAO,GAAG0H,aAAa,CAAC1H,OAL5B;AAOA,UAAIiC,SAAS,GAAG,KAAK,CAArB;;AAEA,UAAIpD,KAAK,CAACkJ,GAAV,EAAe;AACb,eAAO;AACL9F,UAAAA,SAAS,EAAEvD,qBADN;AAELwD,UAAAA,oBAAoB,EAAEyF,UAAU,IAAIC;AAF/B,SAAP;AAID;;AAED,UAAII,aAAa,GAAG,CAApB;;AACA,UAAIL,UAAJ,EAAgB;AACdK,QAAAA,aAAa,GAAGL,UAAhB;AACD,OAFD,MAEO;AACL,YAAIM,YAAY,GAAGpJ,KAAK,CAAC0D,QAAN,CAAevC,OAAf,CAAnB;;AACA,YAAIiI,YAAJ,EAAkB;AAChB,eAAK,IAAI1M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0M,YAApB,EAAkC1M,CAAC,IAAI,CAAvC,EAA0C;AACxC,gBAAIyM,aAAa,IAAIJ,aAArB,EAAoC;AAClCI,cAAAA,aAAa,GAAGJ,aAAhB;AACA;AACD;;AACDI,YAAAA,aAAa,IAAInJ,KAAK,CAACiE,eAAN,CAAsB;AAAED,cAAAA,KAAK,EAAEtH;AAAT,aAAtB,CAAjB;AACD;AACF,SARD,MAQO;AACLyM,UAAAA,aAAa,GAAGnJ,KAAK,CAACiE,eAAN,CAAsB;AAAED,YAAAA,KAAK,EAAE,CAAC;AAAV,WAAtB,CAAhB;AACD;AACF;;AAED,UAAIqF,eAAe,GAAGrJ,KAAK,CAACsJ,SAAN,EAAtB;AAAA,UACIC,GAAG,GAAGF,eAAe,CAACE,GAD1B;AAAA,UAEIC,MAAM,GAAGH,eAAe,CAACG,MAF7B;;AAIA,UAAIR,YAAY,KAAK,MAArB,EAA6B;AAC3B5F,QAAAA,SAAS,GAAGoG,MAAM,GAAGL,aAAa,GAAGF,cAAzB,IAA2CM,GAAG,GAAGC,MAAjD,GAA0D,KAA1D,GAAkE,QAA9E;AACD,OAFD,MAEO;AACLpG,QAAAA,SAAS,GAAG4F,YAAZ;AACD;;AAED,UAAI3F,oBAAoB,GAAG,KAAK,CAAhC;;AACA,UAAIyF,UAAJ,EAAgB;AACdzF,QAAAA,oBAAoB,GAAGyF,UAAvB;AACD,OAFD,MAEO;AACL,YAAIW,kBAAkB,GAAG,CAACrG,SAAS,KAAK,KAAd,GAAsBmG,GAAtB,GAA4BC,MAA7B,IAAuCP,cAAhE;AACA5F,QAAAA,oBAAoB,GAAGqG,IAAI,CAACC,GAAL,CAASF,kBAAT,EAA6BN,aAA7B,CAAvB;AACD;;AAED,aAAO;AACL/F,QAAAA,SAAS,EAAEA,SADN;AAELC,QAAAA,oBAAoB,EAAEA;AAFjB,OAAP;AAID,KAzDD;;AA2DArD,IAAAA,KAAK,CAACsJ,SAAN,GAAkB,YAAY;AAC5B,UAAItJ,KAAK,CAACkJ,GAAN,IAAa,CAAClJ,KAAK,CAAC4J,EAAxB,EAA4B;AAC1B,eAAO;AAAEL,UAAAA,GAAG,EAAE,CAAP;AAAUC,UAAAA,MAAM,EAAE;AAAlB,SAAP;AACD;;AAED,UAAIK,UAAU,GAAG7J,KAAK,CAACvC,KAAN,CAAYoM,UAA7B;AAEA,UAAIC,OAAO,GAAGD,UAAU,EAAxB;;AACA,UAAIE,MAAM,GAAG/J,KAAK,CAAC4J,EAAN,CAASI,qBAAT,EAAb;;AACA,UAAIF,OAAJ,EAAa;AACX;AACA,YAAIG,WAAW,GAAGH,OAAO,CAACE,qBAAR,EAAlB;AACA,eAAO;AACLT,UAAAA,GAAG,EAAEQ,MAAM,CAACR,GAAP,GAAaU,WAAW,CAACV,GADzB;AAELC,UAAAA,MAAM,EAAES,WAAW,CAACT,MAAZ,GAAqBO,MAAM,CAACP;AAF/B,SAAP;AAID,OAhB2B,CAkB5B;;;AACA,UAAIU,cAAc,GAAGC,MAAM,CAACC,QAAP,CAAgBC,eAAhB,CAAgCC,YAArD;AACA,aAAO;AAAEf,QAAAA,GAAG,EAAEQ,MAAM,CAACR,GAAd;AAAmBC,QAAAA,MAAM,EAAEU,cAAc,GAAGH,MAAM,CAACP;AAAnD,OAAP;AACD,KArBD;;AAuBAxJ,IAAAA,KAAK,CAACiE,eAAN,GAAwB,UAAUsG,KAAV,EAAiB;AACvC,UAAIvG,KAAK,GAAGuG,KAAK,CAACvG,KAAlB;AACA,UAAIwG,aAAa,GAAGxK,KAAK,CAACvC,KAA1B;AAAA,UACIgN,YAAY,GAAGD,aAAa,CAACC,YADjC;AAAA,UAEItJ,OAAO,GAAGqJ,aAAa,CAACrJ,OAF5B;AAIA,aAAO,OAAOsJ,YAAP,KAAwB,UAAxB,GAAqCA,YAAY,CAACzK,KAAK,CAAC4B,OAAN,CAAcT,OAAd,EAAuB6C,KAAvB,CAAD,CAAjD,GAAmFyG,YAA1F;AACD,KAPD;;AASAzK,IAAAA,KAAK,CAACoE,eAAN,GAAwB,YAAY;AAClC,aAAO,CAACpE,KAAK,CAACgC,WAAN,CAAkB0I,WAAlB,IAAiC1K,KAAK,CAACgC,WAAN,CAAkB2I,SAAnD,IAAgE,EAAjE,EAAqEC,OAArE,CAA6E,KAA7E,EAAoF,EAApF,CAAP;AACD,KAFD;;AAIA5K,IAAAA,KAAK,CAACgD,QAAN,GAAiB,UAAUvB,MAAV,EAAkBoJ,uBAAlB,EAA2C;AAC1D,aAAO,YAAY;AACjB,YAAIC,aAAa,GAAG9K,KAAK,CAACvC,KAA1B;AAAA,YACI6H,QAAQ,GAAGwF,aAAa,CAACxF,QAD7B;AAAA,YAEI6C,SAAS,GAAG2C,aAAa,CAAC3C,SAF9B;AAAA,YAGInF,QAAQ,GAAG8H,aAAa,CAAC9H,QAH7B;AAAA,YAII1B,QAAQ,GAAGwJ,aAAa,CAACxJ,QAJ7B;AAAA,YAKIC,QAAQ,GAAGuJ,aAAa,CAACvJ,QAL7B;AAAA,YAMIwJ,6BAA6B,GAAGD,aAAa,CAACC,6BANlD;AAQA,YAAIC,aAAa,GAAG,KAAK,CAAzB;;AAEA,YAAI1F,QAAJ,EAAc;AACZ;AACA,cAAI2F,MAAM,GAAGjL,KAAK,CAAC8C,kBAAN,EAAb;;AACA,cAAIoI,aAAa,GAAGD,MAAM,CAACE,SAAP,CAAiB,UAAUxC,CAAV,EAAa;AAChD,mBAAO3I,KAAK,CAAC4B,OAAN,CAAc+G,CAAd,EAAiBrH,QAAjB,MAA+BtB,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBH,QAAtB,CAAtC;AACD,WAFmB,CAApB;;AAGA,cAAI4J,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACxB;AACAF,YAAAA,aAAa,GAAG7C,SAAS,GAAG8C,MAAM,CAACG,IAAP,CAAY3J,MAAZ,CAAH,GAAyB,GAAG4J,MAAH,CAAU3M,kBAAkB,CAACuM,MAAD,CAA5B,EAAsC,CAACxJ,MAAD,CAAtC,CAAlD;AACD,WAHD,MAGO;AACL;AACAuJ,YAAAA,aAAa,GAAGC,MAAM,CAACrC,MAAP,CAAc,UAAUD,CAAV,EAAajM,CAAb,EAAgB;AAC5C,qBAAOA,CAAC,KAAKwO,aAAb;AACD,aAFe,CAAhB;AAGD;AACF,SAfD,MAeO;AACLF,UAAAA,aAAa,GAAGvJ,MAAhB;AACD;;AAED,YAAIuB,QAAQ,CAACgI,aAAD,EAAgBH,uBAAhB,CAAR,KAAqD,KAAzD,EAAgE;AAC9D7K,UAAAA,KAAK,CAACa,oBAAN;AACD;;AAED,YAAIkK,6BAAJ,EAAmC;AACjC/K,UAAAA,KAAK,CAAC6B,cAAN,CAAqB7B,KAAK,CAAC4B,OAAN,CAAcH,MAAd,EAAsBF,QAAtB,CAArB;AACD;AACF,OArCD;AAsCD,KAvCD;;AAyCAvB,IAAAA,KAAK,CAACkH,gBAAN,GAAyB,UAAUzF,MAAV,EAAkB;AACzC,aAAO,UAAUtB,CAAV,EAAa;AAClBH,QAAAA,KAAK,CAACa,oBAAN;;AACAb,QAAAA,KAAK,CAACgD,QAAN,CAAevB,MAAf,EAAuB,IAAvB,EAA6BtB,CAA7B;AACD,OAHD;AAID,KALD;;AAOAH,IAAAA,KAAK,CAACiD,QAAN,GAAiB,UAAU9C,CAAV,EAAa;AAC5B,UAAIH,KAAK,CAACS,eAAV,EAA2B;AACzB;AACD;;AAED,UAAI6K,aAAa,GAAGtL,KAAK,CAACvC,KAA1B;AAAA,UACI8E,UAAU,GAAG+I,aAAa,CAAC/I,UAD/B;AAAA,UAEIgJ,UAAU,GAAGD,aAAa,CAACC,UAF/B;AAAA,UAGIjL,WAAW,GAAGgL,aAAa,CAAChL,WAHhC;AAAA,UAIID,QAAQ,GAAGiL,aAAa,CAACjL,QAJ7B;AAAA,UAKImL,QAAQ,GAAGF,aAAa,CAACE,QAL7B;AAAA,UAMIjL,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MANzB;AASA,UAAIkL,SAAS,GAAGpL,QAAQ,KAAKK,SAAb,GAAyBL,QAAzB,GAAoC,CAACE,MAArD;AACA,UAAImL,UAAU,GAAGD,SAAS,GAAGF,UAAH,GAAgBjL,WAA1C;;AAEA,UAAI,CAACkL,QAAD,IAAaC,SAAS,KAAKlL,MAA3B,IAAqCmL,UAAU,CAACvL,CAAD,CAAV,KAAkB,KAA3D,EAAkE;AAChE,YAAIwL,SAAS,GAAGF,SAAS,GAAGzL,KAAK,CAAC4L,MAAT,GAAkB5L,KAAK,CAACY,OAAjD;;AACAZ,QAAAA,KAAK,CAACa,oBAAN;;AACA,YAAI0B,UAAU,IAAIvC,KAAK,CAACgC,WAAxB,EAAqC;AACnC,cAAIyJ,SAAJ,EAAe;AACbzL,YAAAA,KAAK,CAACgC,WAAN,CAAkB6J,KAAlB;AACD,WAFD,MAEO;AACL7L,YAAAA,KAAK,CAACgC,WAAN,CAAkB8J,IAAlB;;AACA3B,YAAAA,MAAM,CAAC4B,YAAP,GAAsBC,eAAtB;AACD;AACF;;AACDhM,QAAAA,KAAK,CAACW,QAAN,CAAe;AAAEJ,UAAAA,MAAM,EAAEkL;AAAV,SAAf,EAAsCE,SAAtC;AACD;AACF,KA9BD;;AAgCA3L,IAAAA,KAAK,CAAC8B,QAAN,GAAiB,UAAUmK,GAAV,EAAe;AAC9B;AACA;AACA,UAAI,CAACjM,KAAK,CAACgC,WAAP,IAAsBiK,GAAG,CAACC,IAAJ,KAAa,OAAb,IAAwB,CAAC9B,QAAQ,CAAC+B,YAA5D,EAA0E;AACxE;AACD;;AAED,UAAIC,QAAQ,GAAG,SAASA,QAAT,GAAoB;AACjC,YAAIrK,MAAM,GAAG/B,KAAK,CAACoE,eAAN,EAAb;;AACA,YAAIrC,MAAM,KAAK/B,KAAK,CAACiC,UAArB,EAAiC;AAC/BjC,UAAAA,KAAK,CAACW,QAAN,CAAe;AAAEoB,YAAAA,MAAM,EAAEA;AAAV,WAAf;;AAEA,cAAID,QAAQ,GAAG9B,KAAK,CAACvC,KAAN,CAAYqE,QAA3B;;AAEA,cAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,YAAAA,QAAQ,CAACC,MAAD,CAAR;AACD;AACF;;AACD/B,QAAAA,KAAK,CAACiC,UAAN,GAAmBF,MAAnB;AACD,OAZD;;AAcA,UAAI,CAAC/B,KAAK,CAACS,eAAX,EAA4B;AAC1B,YAAIF,MAAM,GAAGP,KAAK,CAACQ,KAAN,CAAYD,MAAzB;;AAEA,gBAAQ0L,GAAG,CAACC,IAAZ;AACE,eAAK,OAAL;AACE;AACAD,YAAAA,GAAG,CAACI,cAAJ,GAFF,CAIE;;AACA,gBAAIC,aAAa,GAAGL,GAAG,CAACK,aAAJ,IAAqBnC,MAAM,CAACmC,aAAhD;AACA,gBAAIC,UAAU,GAAGvM,KAAK,CAACgC,WAAN,CAAkB0I,WAAlB,GAAgC4B,aAAa,CAACE,OAAd,CAAsB,MAAtB,CAAjD,CANF,CAQE;;AACAxM,YAAAA,KAAK,CAACgC,WAAN,CAAkB0I,WAAlB,GAAgC6B,UAAhC,CATF,CAWE;;AACA,gBAAIE,KAAK,GAAGrC,QAAQ,CAACsC,WAAT,EAAZ;AACAD,YAAAA,KAAK,CAACE,kBAAN,CAAyB3M,KAAK,CAACgC,WAA/B;AACAyK,YAAAA,KAAK,CAACG,QAAN,CAAe,KAAf;AACA,gBAAIC,SAAS,GAAG1C,MAAM,CAAC4B,YAAP,EAAhB;AACAc,YAAAA,SAAS,CAACb,eAAV;AACAa,YAAAA,SAAS,CAACC,QAAV,CAAmBL,KAAnB,EAjBF,CAmBE;;AACAL,YAAAA,QAAQ;AACR;;AACF,eAAK,OAAL;AACE;AACA,gBAAI,CAAC7L,MAAL,EAAa;AACXP,cAAAA,KAAK,CAACiD,QAAN,CAAegJ,GAAf;;AACAjM,cAAAA,KAAK,CAACS,eAAN,GAAwBC,SAAxB;AACD;;AACD;;AACF,eAAK,OAAL;AACE;AACA,gBAAIH,MAAJ,EAAY;AACVP,cAAAA,KAAK,CAACa,oBAAN;AACD;;AACD;;AACF,eAAK,SAAL;AACE,gBAAIoL,GAAG,CAACc,WAAJ,CAAgBC,OAAhB,KAA4B,CAA5B,IAAiCzM,MAArC,EAA6C;AAC3C;AACA;AACAP,cAAAA,KAAK,CAACiD,QAAN,CAAegJ,GAAf;;AACAjM,cAAAA,KAAK,CAACS,eAAN,GAAwBC,SAAxB;AACD,aALD,MAKO,IAAIuL,GAAG,CAACc,WAAJ,CAAgBC,OAAhB,KAA4B,EAAhC,EAAoC;AACzC;AACAf,cAAAA,GAAG,CAACI,cAAJ;AACD;;AACD;;AACF,eAAK,OAAL;AACA,eAAK,OAAL;AACED,YAAAA,QAAQ;AACR;;AACF;AACE;AApDJ;AAsDD;AACF,KA/ED;;AAiFApM,IAAAA,KAAK,CAAC+H,YAAN,GAAqB,UAAUkF,MAAV,EAAkB;AACrC,UAAIlF,YAAY,GAAG/H,KAAK,CAACvC,KAAN,CAAYsK,YAA/B;;AAEA,UAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACtCA,QAAAA,YAAY,CAAC/H,KAAK,CAACoE,eAAN,EAAD,EAA0BpE,KAAK,CAAC8C,kBAAN,EAA1B,EAAsDmK,MAAtD,CAAZ;AACD;AACF,KAND;;AAQAjN,IAAAA,KAAK,CAAC4L,MAAN,GAAe,YAAY;AACzB,UAAIA,MAAM,GAAG5L,KAAK,CAACvC,KAAN,CAAYmO,MAAzB;;AAEA,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AAChCA,QAAAA,MAAM;AACP;AACF,KAND;;AAQA5L,IAAAA,KAAK,CAACY,OAAN,GAAgB,YAAY;AAC1B,UAAIsM,aAAa,GAAGlN,KAAK,CAACvC,KAA1B;AAAA,UACImD,OAAO,GAAGsM,aAAa,CAACtM,OAD5B;AAAA,UAEIuM,kBAAkB,GAAGD,aAAa,CAACC,kBAFvC;AAAA,UAGIpC,6BAA6B,GAAGmC,aAAa,CAACnC,6BAHlD;AAIA,UAAIhJ,MAAM,GAAG/B,KAAK,CAACQ,KAAN,CAAYuB,MAAzB;;AAGA,UAAI,CAACgJ,6BAAD,IAAkCoC,kBAAlC,IAAwDpL,MAA5D,EAAoE;AAClE/B,QAAAA,KAAK,CAAC6B,cAAN,CAAqB,EAArB;AACD;;AAED,UAAI,OAAOjB,OAAP,KAAmB,UAAvB,EAAmC;AACjCA,QAAAA,OAAO;AACR;AACF,KAfD;;AAiBAZ,IAAAA,KAAK,CAACQ,KAAN,GAAc;AACZD,MAAAA,MAAM,EAAE9C,KAAK,CAAC4C,QAAN,KAAmBK,SAAnB,GAA+B,KAA/B,GAAuCjD,KAAK,CAAC4C,QADzC;AAEZ0B,MAAAA,MAAM,EAAE;AAFI,KAAd;AAKA/B,IAAAA,KAAK,CAACkJ,GAAN,GAAY,OAAOiB,MAAP,KAAkB,WAA9B;AACA,WAAOnK,KAAP;AACD;AAED;;;;;AAKAzC,EAAAA,YAAY,CAACuC,aAAD,EAAgB,CAAC;AAC3BhD,IAAAA,GAAG,EAAE,mBADsB;AAE3BR,IAAAA,KAAK,EAAE,SAAS8Q,iBAAT,GAA6B;AAClChD,MAAAA,QAAQ,CAACiD,gBAAT,CAA0B,OAA1B,EAAmC,KAAKnN,WAAxC;AACD;AAJ0B,GAAD,EAKzB;AACDpD,IAAAA,GAAG,EAAE,sBADJ;AAEDR,IAAAA,KAAK,EAAE,SAASgR,oBAAT,GAAgC;AACrClD,MAAAA,QAAQ,CAACmD,mBAAT,CAA6B,OAA7B,EAAsC,KAAKrN,WAA3C;AACD;AAED;;;;AANC,GALyB,EAezB;AACDpD,IAAAA,GAAG,EAAE,MADJ;AAEDR,IAAAA,KAAK,EAAE,SAASkR,IAAT,CAAcC,GAAd,EAAmB;AACxB,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCC,QAAAA,OAAO,CAACL,IAAR,CAAaC,GAAb,EADyC,CACtB;AACpB;AACF;AAED;;;;AAKA;;;;AAKA;;;;AAlBC,GAfyB,EAqCzB;AACD3Q,IAAAA,GAAG,EAAE,QADJ;;AAID;;;AAGAR,IAAAA,KAAK,EAAE,SAASwR,MAAT,GAAkB;AACvB,UAAIC,IAAJ;AAAA,UACIC,MAAM,GAAG,IADb;;AAGA,UAAIC,MAAM,GAAG,KAAKxQ,KAAlB;AAAA,UACIyQ,KAAK,GAAGD,MAAM,CAACC,KADnB;AAAA,UAEI5I,QAAQ,GAAG2I,MAAM,CAAC3I,QAFtB;AAAA,UAGIkG,QAAQ,GAAGyC,MAAM,CAACzC,QAHtB;AAAA,UAII9I,CAAC,GAAGuL,MAAM,CAACvL,CAJf;AAKA,UAAInC,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAAxB,CATuB,CAWvB;;AAEA,UAAI4N,iBAAiB,GAAG,CAAC,GAAG7P,YAAY,CAACG,OAAjB,EAA0B,aAA1B,EAAyCiE,CAAC,CAAC0L,WAA3C,GAAyDL,IAAI,GAAG;AACtFM,QAAAA,UAAU,EAAE9N,MAD0E;AAEtF+N,QAAAA,SAAS,EAAEJ,KAF2E;AAGtFK,QAAAA,SAAS,EAAEjJ,QAH2E;AAItFkJ,QAAAA,YAAY,EAAEhD;AAJwE,OAAP,EAK9ExM,eAAe,CAAC+O,IAAD,EAAOrL,CAAC,CAAC2L,UAAT,EAAqB9N,MAArB,CAL+D,EAKjCvB,eAAe,CAAC+O,IAAD,EAAOrL,CAAC,CAAC4L,SAAT,EAAoBJ,KAApB,CALkB,EAKUlP,eAAe,CAAC+O,IAAD,EAAOrL,CAAC,CAAC6L,SAAT,EAAoBjJ,QAApB,CALzB,EAKwDtG,eAAe,CAAC+O,IAAD,EAAOrL,CAAC,CAAC8L,YAAT,EAAuBhD,QAAvB,CALvE,EAKyGuC,IALlK,EAAxB;AAMA,UAAIU,oBAAoB,GAAG,CAAC,GAAGnQ,YAAY,CAACG,OAAjB,EAA0B,mBAA1B,EAA+CiE,CAAC,CAACgM,iBAAjD,CAA3B;AACA,UAAIC,aAAa,GAAG,KAAK1L,QAAzB;AAEA,aAAO9E,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAE2J;AAAb,OAFK,EAGLhQ,OAAO,CAACM,OAAR,CAAgB8F,aAAhB,CACE,KADF,EAEE;AACEC,QAAAA,SAAS,EAAEiK,oBADb;AAEEvJ,QAAAA,OAAO,EAAEyJ,aAFX;AAGE/H,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAagD,EAAb,EAAiB;AACpBoE,UAAAA,MAAM,CAACpE,EAAP,GAAYA,EAAZ;AACD;AALH,OAFF,EASE,KAAKzE,mBAAL,EATF,EAUE,KAAKgC,UAAL,EAVF,CAHK,EAeL,KAAKhF,UAAL,EAfK,CAAP;AAiBD;AA9CA,GArCyB,CAAhB,EAoFR,CAAC;AACHrF,IAAAA,GAAG,EAAE,0BADF;AAEHR,IAAAA,KAAK,EAAE,SAASsS,wBAAT,CAAkCC,KAAlC,EAAyCrO,KAAzC,EAAgD;AACrD,UAAIH,QAAQ,GAAGwO,KAAK,CAACxO,QAArB;AACA,UAAIE,MAAM,GAAGC,KAAK,CAACD,MAAnB;;AAEA,UAAIF,QAAQ,KAAKK,SAAb,IAA0BH,MAAM,KAAKF,QAAzC,EAAmD;AACjD,eAAO9D,QAAQ,CAAC,EAAD,EAAKiE,KAAL,EAAY;AACzBD,UAAAA,MAAM,EAAEF;AADiB,SAAZ,CAAf;AAGD;;AAED,aAAOG,KAAP;AACD;AAbE,GAAD,CApFQ,CAAZ;;AAoGA,SAAOV,aAAP;AACD,CAnxBmB,CAmxBlB7B,MAAM,CAAC6Q,aAnxBW,CAApB;;AAqxBAzS,OAAO,CAACoC,OAAR,GAAkBqB,aAAlB;AAGAA,aAAa,CAACiP,YAAd,GAA6BxQ,iBAAiB,CAACwQ,YAA/C;AACAjP,aAAa,CAACkP,SAAd,GAA0BzQ,iBAAiB,CAACyQ,SAA5C","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _propsDefinitions = require('./propsDefinitions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // @TODO\n// hot keys: select option on Enter, remove on Backspcae, highlight etc\n// disable option\n\nvar DEFAULT_LIST_POSITION = 'bottom';\n\nvar ReactSelectMe = function (_PureComponent) {\n  _inherits(ReactSelectMe, _PureComponent);\n\n  function ReactSelectMe(props) {\n    _classCallCheck(this, ReactSelectMe);\n\n    var _this = _possibleConstructorReturn(this, (ReactSelectMe.__proto__ || Object.getPrototypeOf(ReactSelectMe)).call(this, props));\n\n    _this.closeGlobal = function (e) {\n      var _this$props = _this.props,\n          isOpened = _this$props.isOpened,\n          beforeClose = _this$props.beforeClose;\n      var opened = _this.state.opened;\n      // @maslianok: when you decide to change this, please, keep in mind, that this case should work:\n      // Open A -> Open B -> A should be closed\n\n      if (_this.skipPropagation || !opened) {\n        _this.skipPropagation = undefined;\n        return;\n      }\n\n      if (!isOpened && beforeClose(e) !== false) {\n        _this.setState({ opened: false }, _this.onClose);\n      }\n    };\n\n    _this.skipEventPropagation = function () {\n      _this.skipPropagation = true;\n    };\n\n    _this.validateDataStructure = function (data) {\n      var toImmutable = _this.props.toImmutable;\n\n      return typeof toImmutable === 'function' ? toImmutable(data) : data;\n    };\n\n    _this.patchSelectedOption = function (selectedOption, options) {\n      var _this$validateDataStr;\n\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          labelKey = _this$props2.labelKey,\n          forbidPhantomSelection = _this$props2.forbidPhantomSelection;\n\n      // search for this option in the `options` array\n\n      var value = (typeof selectedOption === 'undefined' ? 'undefined' : _typeof(selectedOption)) === 'object' ? selectedOption[valueKey] : selectedOption;\n      var option = options.find(function (o) {\n        return _this.getProp(o, valueKey) === value;\n      });\n\n      if (option || forbidPhantomSelection) {\n        return option;\n      }\n\n      // if not found - make a phantom selection\n      return (typeof selectedOption === 'undefined' ? 'undefined' : _typeof(selectedOption)) === 'object' ? selectedOption : _this.validateDataStructure((_this$validateDataStr = {}, _defineProperty(_this$validateDataStr, valueKey, selectedOption), _defineProperty(_this$validateDataStr, labelKey, selectedOption), _this$validateDataStr));\n    };\n\n    _this.setSearchValue = function (value) {\n      var onSearch = _this.props.onSearch;\n\n      _this.setState({\n        search: value\n      });\n\n      if (_this.searchInput) {\n        _this.prevSearch = undefined;\n        _this.searchInput.innerHTML = value;\n      }\n\n      if (typeof onSearch === 'function') {\n        onSearch(value);\n      }\n    };\n\n    _this.renderList = function () {\n      var _cs;\n\n      var _this$props3 = _this.props,\n          addNewItem = _this$props3.addNewItem,\n          searchable = _this$props3.searchable,\n          listRenderer = _this$props3.listRenderer,\n          virtualized = _this$props3.virtualized,\n          s = _this$props3.s,\n          renderVirtualizedList = _this$props3.renderVirtualizedList;\n      var opened = _this.state.opened;\n\n\n      if (!opened) {\n        return undefined;\n      }\n\n      var options = _this.getOptions();\n      var selectedOptions = _this.getSelectedOptions();\n\n      if (typeof listRenderer === 'function') {\n        return listRenderer(options, selectedOptions, _this.renderOption, _this.onChange, _this.onToggle);\n      }\n\n      var _this$getListProps = _this.getListProps(),\n          direction = _this$getListProps.direction,\n          calculatedListHeight = _this$getListProps.calculatedListHeight;\n\n      var listClasses = (0, _classnames2.default)('dd__list', s.dd__list, 'dd__openTo' + direction, s['dd__openTo' + direction], (_cs = {}, _defineProperty(_cs, s.dd__listVirtualized, virtualized), _defineProperty(_cs, 'dd__listVirtualized', virtualized), _cs));\n\n      var rowCount = _this.getCount(options);\n      if (rowCount && typeof renderVirtualizedList === 'function') {\n        var rowClassName = (0, _classnames2.default)('dd__optionVirtualized', s.dd__optionVirtualized);\n        return renderVirtualizedList({\n          rowRenderer: function rowRenderer(_ref) {\n            var style = _ref.style,\n                index = _ref.index;\n            return _this.renderOption(_this.getProp(options, index), selectedOptions, style);\n          },\n          rowCount: rowCount,\n          calculatedListHeight: calculatedListHeight,\n          getOptionHeight: _this.getOptionHeight,\n          listClasses: listClasses,\n          rowClassName: rowClassName\n        });\n      }\n      var listContent = void 0;\n      if (rowCount) {\n        listContent = options.map(function (option) {\n          return _this.renderOption(option, selectedOptions);\n        });\n      } else {\n        listContent = addNewItem && searchable && _this.getSearchString() ? _this.renderAddNewItem() : _this.renderNoItemsFound();\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: listClasses, style: { maxHeight: calculatedListHeight + 'px' } },\n        listContent\n      );\n    };\n\n    _this.renderOption = function (option, selectedOptions, style) {\n      var _this$props4 = _this.props,\n          valueKey = _this$props4.valueKey,\n          labelKey = _this$props4.labelKey,\n          optionRenderer = _this$props4.optionRenderer,\n          s = _this$props4.s;\n\n      var isSelected = selectedOptions.some(function (selected) {\n        return _this.getProp(selected, valueKey) === _this.getProp(option, valueKey);\n      });\n      var className = (0, _classnames2.default)('dd__option', s.dd__option, _defineProperty({\n        dd__selectedOption: isSelected\n      }, s.dd__selectedOption, isSelected));\n\n      var label = typeof optionRenderer === 'function' ? optionRenderer(option, selectedOptions) : _react2.default.createElement(\n        'div',\n        { className: className },\n        _this.getProp(option, labelKey)\n      );\n\n      return _react2.default.createElement(\n        'div',\n        { key: _this.getProp(option, valueKey), style: style, onClick: _this.onChange(option) },\n        label\n      );\n    };\n\n    _this.renderSelectedBlock = function () {\n      var _this$props5 = _this.props,\n          placeholder = _this$props5.placeholder,\n          searchable = _this$props5.searchable,\n          multiple = _this$props5.multiple,\n          s = _this$props5.s,\n          selectedValueRenderer = _this$props5.selectedValueRenderer,\n          selectedBlockRenderer = _this$props5.selectedBlockRenderer;\n      var opened = _this.state.opened;\n\n      var valueRenderer = selectedValueRenderer || _this.renderSelectedItem;\n      var selectedOptions = _this.getSelectedOptions();\n\n      if (selectedBlockRenderer) {\n        return selectedBlockRenderer(selectedOptions, _this.onChange, valueRenderer, _this.renderSearchInput);\n      }\n\n      var selectedBlockClasses = (0, _classnames2.default)('dd__selected', s.dd__selected);\n      var placeholderClasses = (0, _classnames2.default)('dd__placeholder', s.dd__placeholder);\n      var noOptionsSelected = !_this.getCount(selectedOptions);\n\n      var selectedElements = void 0;\n      if (!noOptionsSelected && (multiple || !searchable || !opened)) {\n        selectedElements = selectedOptions.map(function (option) {\n          return valueRenderer(option, _this.onChange);\n        });\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: selectedBlockClasses },\n        selectedElements,\n        noOptionsSelected && (!searchable || !opened) && _react2.default.createElement(\n          'div',\n          { className: placeholderClasses },\n          placeholder\n        ),\n        searchable && _this.renderSearchInput()\n      );\n    };\n\n    _this.renderSearchInput = function () {\n      var _this$props6 = _this.props,\n          s = _this$props6.s,\n          searchInputRenderer = _this$props6.searchInputRenderer;\n\n      var selectedOptions = _this.getSelectedOptions();\n      var className = (0, _classnames2.default)('dd__search', s.dd__search);\n\n      if (typeof searchInputRenderer === 'function') {\n        return searchInputRenderer(selectedOptions, _this.onSearch);\n      }\n\n      return _react2.default.createElement('div', {\n        contentEditable: true,\n        tabIndex: 0,\n        className: className,\n        onInput: _this.onSearch,\n        onKeyDown: _this.onSearch,\n        onFocus: _this.onSearch,\n        onClick: _this.onSearch,\n        onPaste: _this.onSearch,\n        onKeyUp: _this.onSearch,\n        ref: function ref(e) {\n          _this.searchInput = e;\n        }\n      });\n    };\n\n    _this.renderSelectedItem = function (option) {\n      var _this$props7 = _this.props,\n          valueKey = _this$props7.valueKey,\n          labelKey = _this$props7.labelKey,\n          multiple = _this$props7.multiple,\n          s = _this$props7.s;\n\n      var selectedOptionClasses = (0, _classnames2.default)('dd__selectedItem', s.dd__selectedItem);\n      var crossIconClasses = (0, _classnames2.default)('dd__crossIcon', s.dd__crossIcon);\n\n      return _react2.default.createElement(\n        'div',\n        { className: selectedOptionClasses, key: _this.getProp(option, valueKey) },\n        _react2.default.createElement(\n          'div',\n          null,\n          _this.getProp(option, labelKey)\n        ),\n        multiple && _react2.default.createElement(\n          'div',\n          { className: crossIconClasses, onClick: _this.onRemoveSelected(option) },\n          '\\xD7'\n        )\n      );\n    };\n\n    _this.renderIcon = function () {\n      var _this$props8 = _this.props,\n          iconRenderer = _this$props8.iconRenderer,\n          s = _this$props8.s;\n      var opened = _this.state.opened;\n\n      if (typeof iconRenderer === 'function') {\n        return iconRenderer(opened);\n      }\n\n      var className = (0, _classnames2.default)('dd__expandIcon', s.dd__expandIcon);\n      var path = 'M315,1318.04l-4.5,4.96-4.5-4.96,0.944-1.04,3.557,3.92,3.553-3.92,0.944,1.04m-9-5.08,4.5-4.96,4.5,4.96-0.944,1.04-3.557-3.92-3.553,3.92L306,1312.96'; // eslint-disable-line max-len\n      return _react2.default.createElement(\n        'svg',\n        { className: className, viewBox: '0 0 9 15', width: '9px', height: '15px' },\n        _react2.default.createElement('path', { d: path, transform: 'translate(-306 -1308)' })\n      );\n    };\n\n    _this.renderAddNewItem = function () {\n      var _this$props9 = _this.props,\n          s = _this$props9.s,\n          addNewItem = _this$props9.addNewItem;\n\n      var classNames = (0, _classnames2.default)('dd__option', s.dd__option);\n\n      if (addNewItem === false) {\n        return null;\n      }\n\n      var search = _this.getSearchString();\n      if (typeof addNewItem === 'function') {\n        return addNewItem(search, _this.onAddNewItem);\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: classNames, onClick: _this.onAddNewItem },\n        typeof addNewItem === 'undefined' || addNewItem === true ? 'Add \\'' + search + '\\'' : addNewItem\n      );\n    };\n\n    _this.renderNoItemsFound = function () {\n      var _this$props10 = _this.props,\n          s = _this$props10.s,\n          noItemsFound = _this$props10.noItemsFound;\n\n      var classNames = (0, _classnames2.default)('dd__option', 'dd__optionDisabled', s.dd__option, s.dd__optionDisabled);\n\n      if (noItemsFound === false) {\n        return null;\n      }\n\n      if (typeof noItemsFound === 'function') {\n        return noItemsFound();\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: classNames },\n        typeof noItemsFound === 'undefined' || noItemsFound === true ? 'No items found' : noItemsFound\n      );\n    };\n\n    _this.getProp = function (option, key) {\n      var immutable = _this.props.immutable;\n\n      return immutable ? option.get(key) : option[key];\n    };\n\n    _this.getCount = function (items) {\n      var immutable = _this.props.immutable;\n\n      if (!items) {\n        return false;\n      }\n      return immutable ? items.size : items.length;\n    };\n\n    _this.getOptions = function () {\n      var _this$props11 = _this.props,\n          options = _this$props11.options,\n          labelKey = _this$props11.labelKey,\n          valueKey = _this$props11.valueKey;\n\n      if (_this.getCount(options)) {\n        // options are objects\n        if (_typeof(_this.getProp(options, 0)) === 'object') {\n          return options;\n        }\n\n        // options are strings or numbers\n        return options.map(function (option) {\n          var _this$validateDataStr2;\n\n          return _this.validateDataStructure((_this$validateDataStr2 = {}, _defineProperty(_this$validateDataStr2, labelKey, option), _defineProperty(_this$validateDataStr2, valueKey, option), _this$validateDataStr2));\n        });\n      }\n\n      // no options\n      return _this.validateDataStructure([]);\n    };\n\n    _this.getSelectedOptions = function () {\n      var _this$props12 = _this.props,\n          value = _this$props12.value,\n          multiple = _this$props12.multiple;\n\n      var options = _this.getOptions();\n\n      if (typeof value === 'undefined' || multiple && !_this.getCount(value)) {\n        return _this.validateDataStructure([]);\n      }\n\n      var patchedOptions = multiple ? value.map(function (v) {\n        return _this.patchSelectedOption(v, options);\n      }) : [_this.patchSelectedOption(value, options)];\n\n      return _this.validateDataStructure(patchedOptions.filter(function (option) {\n        return !!option;\n      }));\n    };\n\n    _this.getListProps = function () {\n      var _this$props13 = _this.props,\n          listHeight = _this$props13.listHeight,\n          listMaxHeight = _this$props13.listMaxHeight,\n          listPosition = _this$props13.listPosition,\n          boundaryMargin = _this$props13.boundaryMargin,\n          options = _this$props13.options;\n\n      var direction = void 0;\n\n      if (_this.ssr) {\n        return {\n          direction: DEFAULT_LIST_POSITION,\n          calculatedListHeight: listHeight || listMaxHeight\n        };\n      }\n\n      var refinedHeight = 0;\n      if (listHeight) {\n        refinedHeight = listHeight;\n      } else {\n        var optionsCount = _this.getCount(options);\n        if (optionsCount) {\n          for (var i = 0; i < optionsCount; i += 1) {\n            if (refinedHeight >= listMaxHeight) {\n              refinedHeight = listMaxHeight;\n              break;\n            }\n            refinedHeight += _this.getOptionHeight({ index: i });\n          }\n        } else {\n          refinedHeight = _this.getOptionHeight({ index: -1 });\n        }\n      }\n\n      var _this$getOffset = _this.getOffset(),\n          top = _this$getOffset.top,\n          bottom = _this$getOffset.bottom;\n\n      if (listPosition === 'auto') {\n        direction = bottom < refinedHeight + boundaryMargin && top > bottom ? 'top' : 'bottom';\n      } else {\n        direction = listPosition;\n      }\n\n      var calculatedListHeight = void 0;\n      if (listHeight) {\n        calculatedListHeight = listHeight;\n      } else {\n        var maxAvailableHeight = (direction === 'top' ? top : bottom) - boundaryMargin;\n        calculatedListHeight = Math.min(maxAvailableHeight, refinedHeight);\n      }\n\n      return {\n        direction: direction,\n        calculatedListHeight: calculatedListHeight\n      };\n    };\n\n    _this.getOffset = function () {\n      if (_this.ssr || !_this.el) {\n        return { top: 0, bottom: 0 };\n      }\n\n      var getWrapper = _this.props.getWrapper;\n\n      var wrapper = getWrapper();\n      var rectEl = _this.el.getBoundingClientRect();\n      if (wrapper) {\n        // calculate offsets based on wrapper position\n        var rectWrapper = wrapper.getBoundingClientRect();\n        return {\n          top: rectEl.top - rectWrapper.top,\n          bottom: rectWrapper.bottom - rectEl.bottom\n        };\n      }\n\n      // calculate offsets based on viewport\n      var viewportHeight = window.document.documentElement.clientHeight;\n      return { top: rectEl.top, bottom: viewportHeight - rectEl.bottom };\n    };\n\n    _this.getOptionHeight = function (_ref2) {\n      var index = _ref2.index;\n      var _this$props14 = _this.props,\n          optionHeight = _this$props14.optionHeight,\n          options = _this$props14.options;\n\n      return typeof optionHeight === 'function' ? optionHeight(_this.getProp(options, index)) : optionHeight;\n    };\n\n    _this.getSearchString = function () {\n      return (_this.searchInput.textContent || _this.searchInput.innerText || '').replace(/\\n/g, '');\n    };\n\n    _this.onChange = function (option, removeFromSelectedBlock) {\n      return function () {\n        var _this$props15 = _this.props,\n            multiple = _this$props15.multiple,\n            immutable = _this$props15.immutable,\n            onChange = _this$props15.onChange,\n            valueKey = _this$props15.valueKey,\n            labelKey = _this$props15.labelKey,\n            searchDefaultsToSelectedValue = _this$props15.searchDefaultsToSelectedValue;\n\n        var selectedValue = void 0;\n\n        if (multiple) {\n          // prepare values for multiselect\n          var values = _this.getSelectedOptions();\n          var selectedIndex = values.findIndex(function (v) {\n            return _this.getProp(v, valueKey) === _this.getProp(option, valueKey);\n          });\n          if (selectedIndex === -1) {\n            // add new option to selected values\n            selectedValue = immutable ? values.push(option) : [].concat(_toConsumableArray(values), [option]);\n          } else {\n            // remove option from selected values\n            selectedValue = values.filter(function (v, i) {\n              return i !== selectedIndex;\n            });\n          }\n        } else {\n          selectedValue = option;\n        }\n\n        if (onChange(selectedValue, removeFromSelectedBlock) === false) {\n          _this.skipEventPropagation();\n        }\n\n        if (searchDefaultsToSelectedValue) {\n          _this.setSearchValue(_this.getProp(option, labelKey));\n        }\n      };\n    };\n\n    _this.onRemoveSelected = function (option) {\n      return function (e) {\n        _this.skipEventPropagation();\n        _this.onChange(option, true)(e);\n      };\n    };\n\n    _this.onToggle = function (e) {\n      if (_this.skipPropagation) {\n        return;\n      }\n\n      var _this$props16 = _this.props,\n          searchable = _this$props16.searchable,\n          beforeOpen = _this$props16.beforeOpen,\n          beforeClose = _this$props16.beforeClose,\n          isOpened = _this$props16.isOpened,\n          disabled = _this$props16.disabled,\n          opened = _this.state.opened;\n\n\n      var nextState = isOpened !== undefined ? isOpened : !opened;\n      var beforeFunc = nextState ? beforeOpen : beforeClose;\n\n      if (!disabled && nextState !== opened && beforeFunc(e) !== false) {\n        var afterFunc = nextState ? _this.onOpen : _this.onClose;\n        _this.skipEventPropagation();\n        if (searchable && _this.searchInput) {\n          if (nextState) {\n            _this.searchInput.focus();\n          } else {\n            _this.searchInput.blur();\n            window.getSelection().removeAllRanges();\n          }\n        }\n        _this.setState({ opened: nextState }, afterFunc);\n      }\n    };\n\n    _this.onSearch = function (evt) {\n      // `document.documentMode` isn't undefined in IE only.\n      // See more https://msdn.microsoft.com/library/cc196988(v=vs.85).aspx\n      if (!_this.searchInput || evt.type === 'keyup' && !document.documentMode) {\n        return;\n      }\n\n      var doSearch = function doSearch() {\n        var search = _this.getSearchString();\n        if (search !== _this.prevSearch) {\n          _this.setState({ search: search });\n\n          var onSearch = _this.props.onSearch;\n\n          if (typeof onSearch === 'function') {\n            onSearch(search);\n          }\n        }\n        _this.prevSearch = search;\n      };\n\n      if (!_this.skipPropagation) {\n        var opened = _this.state.opened;\n\n        switch (evt.type) {\n          case 'paste':\n            // strip html tags\n            evt.preventDefault();\n\n            // Get pasted data via clipboard API\n            var clipboardData = evt.clipboardData || window.clipboardData;\n            var newContent = _this.searchInput.textContent + clipboardData.getData('Text');\n\n            // set new content\n            _this.searchInput.textContent = newContent;\n\n            // place cursor to the end\n            var range = document.createRange();\n            range.selectNodeContents(_this.searchInput);\n            range.collapse(false);\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n\n            // trigger search\n            doSearch();\n            break;\n          case 'focus':\n            // open dropdown onFocus\n            if (!opened) {\n              _this.onToggle(evt);\n              _this.skipPropagation = undefined;\n            }\n            break;\n          case 'click':\n            // do not close dropdown onClick\n            if (opened) {\n              _this.skipEventPropagation();\n            }\n            break;\n          case 'keydown':\n            if (evt.nativeEvent.keyCode === 9 && opened) {\n              // close dropdown on Tab keydown\n              // blur via Tab\n              _this.onToggle(evt);\n              _this.skipPropagation = undefined;\n            } else if (evt.nativeEvent.keyCode === 13) {\n              // restrict new line\n              evt.preventDefault();\n            }\n            break;\n          case 'input':\n          case 'keyup':\n            doSearch();\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    _this.onAddNewItem = function (params) {\n      var onAddNewItem = _this.props.onAddNewItem;\n\n      if (typeof onAddNewItem === 'function') {\n        onAddNewItem(_this.getSearchString(), _this.getSelectedOptions(), params);\n      }\n    };\n\n    _this.onOpen = function () {\n      var onOpen = _this.props.onOpen;\n\n      if (typeof onOpen === 'function') {\n        onOpen();\n      }\n    };\n\n    _this.onClose = function () {\n      var _this$props17 = _this.props,\n          onClose = _this$props17.onClose,\n          searchClearOnClose = _this$props17.searchClearOnClose,\n          searchDefaultsToSelectedValue = _this$props17.searchDefaultsToSelectedValue;\n      var search = _this.state.search;\n\n\n      if (!searchDefaultsToSelectedValue && searchClearOnClose && search) {\n        _this.setSearchValue('');\n      }\n\n      if (typeof onClose === 'function') {\n        onClose();\n      }\n    };\n\n    _this.state = {\n      opened: props.isOpened === undefined ? false : props.isOpened,\n      search: ''\n    };\n\n    _this.ssr = typeof window === 'undefined';\n    return _this;\n  }\n\n  /** **************************************\n   ************ Lifecycle events ************\n   **************************************** */\n\n\n  _createClass(ReactSelectMe, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('click', this.closeGlobal);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.closeGlobal);\n    }\n\n    /** **************************************\n     **************** Utils *******************\n     **************************************** */\n\n  }, {\n    key: 'warn',\n    value: function warn(msg) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(msg); // eslint-disable-line no-console\n      }\n    }\n\n    /** **************************************\n     ************** Renderers *****************\n     **************************************** */\n\n\n    /** **************************************\n     *************** Getters ******************\n     **************************************** */\n\n\n    /** **************************************\n     **************** Events ******************\n     **************************************** */\n\n  }, {\n    key: 'render',\n\n\n    /** **************************************\n     **************** Render ******************\n     **************************************** */\n    value: function render() {\n      var _cs3,\n          _this2 = this;\n\n      var _props = this.props,\n          error = _props.error,\n          multiple = _props.multiple,\n          disabled = _props.disabled,\n          s = _props.s;\n      var opened = this.state.opened;\n\n      // classnames\n\n      var wrapperClassnames = (0, _classnames2.default)('dd__wrapper', s.dd__wrapper, (_cs3 = {\n        dd__opened: opened,\n        dd__error: error,\n        dd__multi: multiple,\n        dd__disabled: disabled\n      }, _defineProperty(_cs3, s.dd__opened, opened), _defineProperty(_cs3, s.dd__error, error), _defineProperty(_cs3, s.dd__multi, multiple), _defineProperty(_cs3, s.dd__disabled, disabled), _cs3));\n      var selectControlClasses = (0, _classnames2.default)('dd__selectControl', s.dd__selectControl);\n      var toggleHandler = this.onToggle;\n\n      return _react2.default.createElement(\n        'div',\n        { className: wrapperClassnames },\n        _react2.default.createElement(\n          'div',\n          {\n            className: selectControlClasses,\n            onClick: toggleHandler,\n            ref: function ref(el) {\n              _this2.el = el;\n            }\n          },\n          this.renderSelectedBlock(),\n          this.renderIcon()\n        ),\n        this.renderList()\n      );\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(_ref3, state) {\n      var isOpened = _ref3.isOpened;\n      var opened = state.opened;\n\n      if (isOpened !== undefined && opened !== isOpened) {\n        return _extends({}, state, {\n          opened: isOpened\n        });\n      }\n\n      return state;\n    }\n  }]);\n\n  return ReactSelectMe;\n}(_react.PureComponent);\n\nexports.default = ReactSelectMe;\n\n\nReactSelectMe.defaultProps = _propsDefinitions.defaultProps;\nReactSelectMe.propTypes = _propsDefinitions.propTypes;"]},"metadata":{},"sourceType":"script"}